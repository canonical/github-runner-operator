{"uid":"35aaddac6d2edacd","name":"test_reactive_mode_scale_down","fullName":"tests.integration.test_reactive#test_reactive_mode_scale_down","historyId":"bb6817de59a8aff167470484d2d33ee6","time":{"start":1744613685661,"stop":1744614712192,"duration":1026531},"description":"\n    arrange: Scale down the number of virtual machines to 2 and spawn a job.\n    act:\n        1. Scale down the number of virtual machines to 0 and call reconcile.\n        2. Spawn a job.\n    assert:\n        1. The job fails.\n        2. The job is queued and there is a message in the queue.\n    ","descriptionHtml":"<pre><code>arrange: Scale down the number of virtual machines to 2 and spawn a job.\nact:\n    1. Scale down the number of virtual machines to 0 and call reconcile.\n    2. Spawn a job.\nassert:\n    1. The job fails.\n    2. The job is queued and there is a message in the queue.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1744612029660,"stop":1744612029660,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1744612029660,"stop":1744612030092,"duration":432},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1744612029660,"stop":1744612029660,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1744612029660,"stop":1744612029660,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_client","time":{"start":1744612030093,"stop":1744612030459,"duration":366},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token","time":{"start":1744612030093,"stop":1744612030093,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"path","time":{"start":1744612030459,"stop":1744612030459,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_repository","time":{"start":1744612030459,"stop":1744612031235,"duration":776},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch","time":{"start":1744612031236,"stop":1744612033620,"duration":2384},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1744612033621,"stop":1744612033621,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1744612033621,"stop":1744612033621,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1744612033621,"stop":1744612033621,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1744612033621,"stop":1744612033621,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_clouds_yaml","time":{"start":1744612033621,"stop":1744612033621,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1744612033621,"stop":1744612033621,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_https_proxy","time":{"start":1744612033622,"stop":1744612033622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_clouds_yaml","time":{"start":1744612033622,"stop":1744612033622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clouds_yaml_contents","time":{"start":1744612033622,"stop":1744612033622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_http_proxy","time":{"start":1744612033622,"stop":1744612033622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_no_proxy","time":{"start":1744612033622,"stop":1744612033622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_config","time":{"start":1744612033622,"stop":1744612033622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"network_name","time":{"start":1744612033622,"stop":1744612033622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flavor_name","time":{"start":1744612033622,"stop":1744612033622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_model_proxy","time":{"start":1744612033623,"stop":1744612033632,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1744612033623,"stop":1744612033623,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1744612033632,"stop":1744612033658,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1744612033658,"stop":1744612273148,"duration":239490},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1744612273148,"stop":1744612932093,"duration":658945},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mongodb","time":{"start":1744612932093,"stop":1744613065537,"duration":133444},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_for_reactive","time":{"start":1744613065538,"stop":1744613111056,"duration":45518},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app","time":{"start":1744613628356,"stop":1744613685661,"duration":57305},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1744613628356,"stop":1744613628356,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: Scale down the number of virtual machines to 2 and spawn a job.\n    act:\n        1. Scale down the number of virtual machines to 0 and call reconcile.\n        2. Spawn a job.\n    assert:\n        1. The job fails.\n        2. The job is queued and there is a message in the queue.\n    ","status":"passed","steps":[],"attachments":[{"uid":"9af6e4b35c14dd7b","name":"log","source":"9af6e4b35c14dd7b.txt","type":"text/plain","size":9080}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"app::finalizer","time":{"start":1744614712193,"stop":1744614743416,"duration":31223},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1744614743416,"stop":1744614743416,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1744614743417,"stop":1744614743875,"duration":458},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1744614743876,"stop":1744614744543,"duration":667},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch::finalizer","time":{"start":1744614744547,"stop":1744614745280,"duration":733},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1744614745282,"stop":1744614745598,"duration":316},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1744614745598,"stop":1744614745599,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1744614745599,"stop":1744614745599,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1744614745599,"stop":1744614745599,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"openstack"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_reactive"},{"name":"host","value":"github-runner"},{"name":"thread","value":"23283-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_reactive"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"a110572f470934f1","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":13,"broken":22,"skipped":2,"passed":36,"unknown":11,"total":84},"items":[{"uid":"42fe1ad408c1cad3","reportUrl":"../2382//#testresult/42fe1ad408c1cad3","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:nThKzIGSRhtlZ2KTgLnmIUVQYyRWUc2s@10.142.22.82:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-lpr589cg')","time":{"start":1744571950011,"stop":1744572909475,"duration":959464}},{"uid":"2bf740a96767c3be","reportUrl":"../2381//#testresult/2bf740a96767c3be","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:JkLadvKX24qIsqRLxeINe53XmtoYbRX3@10.181.44.54:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-d3rhdkde')","time":{"start":1744527289933,"stop":1744528212889,"duration":922956}},{"uid":"f538b6850b1e0516","reportUrl":"../2380//#testresult/f538b6850b1e0516","status":"passed","time":{"start":1744485019272,"stop":1744485916952,"duration":897680}},{"uid":"8faca4051b677528","reportUrl":"../2379//#testresult/8faca4051b677528","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\n  mongodb/0 [executing] maintenance: installing MongoDB","time":{"start":1744442119993,"stop":1744442119993,"duration":0}},{"uid":"c00c37cfd91f3a11","reportUrl":"../2378//#testresult/c00c37cfd91f3a11","status":"passed","time":{"start":1744399345516,"stop":1744400228427,"duration":882911}},{"uid":"ff4708ae9c9b651e","reportUrl":"../2362//#testresult/ff4708ae9c9b651e","status":"passed","time":{"start":1744356548096,"stop":1744357566884,"duration":1018788}},{"uid":"7e0cbc970c2a97c0","reportUrl":"../2358//#testresult/7e0cbc970c2a97c0","status":"passed","time":{"start":1744311259849,"stop":1744312291053,"duration":1031204}},{"uid":"6f43ec95052e66da","reportUrl":"../2336//#testresult/6f43ec95052e66da","status":"passed","time":{"start":1744226692881,"stop":1744227678562,"duration":985681}},{"uid":"784465615442a45","reportUrl":"../2312//#testresult/784465615442a45","status":"passed","time":{"start":1744181671513,"stop":1744182714358,"duration":1042845}},{"uid":"1b4b9ab03617d418","reportUrl":"../2310//#testresult/1b4b9ab03617d418","status":"passed","time":{"start":1744145398034,"stop":1744146422011,"duration":1023977}},{"uid":"95b95dba8bb09349","reportUrl":"../2293//#testresult/95b95dba8bb09349","status":"passed","time":{"start":1744096903728,"stop":1744097757082,"duration":853354}},{"uid":"a09c444b1aa0d993","reportUrl":"../2291//#testresult/a09c444b1aa0d993","status":"passed","time":{"start":1744053737556,"stop":1744054858978,"duration":1121422}},{"uid":"965cfd50b0f4ce53","reportUrl":"../2277//#testresult/965cfd50b0f4ce53","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:YB5ozjOuq4rD4l6TNqWh8VhiMKvma0ZU@10.227.190.123:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-h1crgx7g')","time":{"start":1743967278936,"stop":1743968094961,"duration":816025}},{"uid":"37bd75bfee79b528","reportUrl":"../2276//#testresult/37bd75bfee79b528","status":"passed","time":{"start":1743922541328,"stop":1743923437613,"duration":896285}},{"uid":"c5091e3d2beb7c53","reportUrl":"../2275//#testresult/c5091e3d2beb7c53","status":"passed","time":{"start":1743880643561,"stop":1743881700181,"duration":1056620}},{"uid":"fcd29832a994c5e","reportUrl":"../2274//#testresult/fcd29832a994c5e","status":"passed","time":{"start":1743837632930,"stop":1743838569097,"duration":936167}},{"uid":"efc2bdb02a173988","reportUrl":"../2273//#testresult/efc2bdb02a173988","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:drDJ8DOdR7W1koRzOrm4wClUk8QYPeVJ@10.164.132.122:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-x4s3wzaz')","time":{"start":1743792761359,"stop":1743793541911,"duration":780552}},{"uid":"51e67f0f8824c78b","reportUrl":"../2263//#testresult/51e67f0f8824c78b","status":"passed","time":{"start":1743753088132,"stop":1743753989153,"duration":901021}},{"uid":"af38d6f8514b07fc","reportUrl":"../2260//#testresult/af38d6f8514b07fc","status":"passed","time":{"start":1743708042598,"stop":1743708958472,"duration":915874}},{"uid":"139c1186b5efb255","reportUrl":"../2258//#testresult/139c1186b5efb255","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:0NN0jQ33KNpCBsbtq9UV5rqKV3MRutsi@10.35.51.212:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-s2s486q8')","time":{"start":1743665038198,"stop":1743666048255,"duration":1010057}}]},"tags":["asyncio","abort_on_fail","openstack"]},"source":"35aaddac6d2edacd.json","parameterValues":[]}