{"uid":"e0dbcbc2b9ee9b72","name":"test_jobmanager_reactive","fullName":"tests.integration.jobmanager.test_jobmanager_reactive#test_jobmanager_reactive","historyId":"bcfc000091d2ee52821e468a61bfae99","time":{"start":1755932322959,"stop":1755933152917,"duration":829958},"description":"\n    Test reactive mode together with jobmanager.\n\n    Test that after putting a job in the queue that the runner is registered and the\n    job is picked up.\n\n    So,\n    1. Put job in the queue\n    2. Wait for runner to be registered\n    3. Wait for reactive process to ask for job status\n    4. Mark job deletable\n    5. Reconcile\n    6. Assert queue is empty\n    ","descriptionHtml":"<pre><code>Test reactive mode together with jobmanager.\n\nTest that after putting a job in the queue that the runner is registered and the\njob is picked up.\n\nSo,\n1. Put job in the queue\n2. Wait for runner to be registered\n3. Wait for reactive process to ask for job status\n4. Mark job deletable\n5. Reconcile\n6. Assert queue is empty\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"jobmanager_ip_address","time":{"start":1755930240510,"stop":1755930240511,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1755930240510,"stop":1755930240510,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1755930240511,"stop":1755930240511,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_base_url","time":{"start":1755930240511,"stop":1755930240511,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_token","time":{"start":1755930240511,"stop":1755930240511,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_listen_port","time":{"start":1755930240511,"stop":1755930240511,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_httpserver","time":{"start":1755930240512,"stop":1755930240524,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_ssl_context","time":{"start":1755930240512,"stop":1755930240512,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_listen_address","time":{"start":1755930240512,"stop":1755930240512,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1755930240524,"stop":1755930240524,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1755930240524,"stop":1755930241010,"duration":486},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"http_proxy","time":{"start":1755930241010,"stop":1755930241010,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"https_proxy","time":{"start":1755930241011,"stop":1755930241011,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"no_proxy","time":{"start":1755930241011,"stop":1755930241011,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1755930241011,"stop":1755930241018,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1755930241019,"stop":1755930241044,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1755930241044,"stop":1755930241044,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mongodb","time":{"start":1755930241045,"stop":1755930243270,"duration":2225},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_app","time":{"start":1755930243271,"stop":1755931473006,"duration":1229735},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_clouds_yaml","time":{"start":1755930243271,"stop":1755930243271,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"path","time":{"start":1755930243271,"stop":1755930243271,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1755930243271,"stop":1755930243271,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1755930243271,"stop":1755930243271,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1755930243271,"stop":1755930243271,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token","time":{"start":1755930243272,"stop":1755930243272,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_no_proxy","time":{"start":1755930243272,"stop":1755930243272,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_https_proxy","time":{"start":1755930243272,"stop":1755930243272,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_http_proxy","time":{"start":1755930243272,"stop":1755930243272,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_clouds_yaml","time":{"start":1755930243272,"stop":1755930243272,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_config","time":{"start":1755930243272,"stop":1755930243272,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"network_name","time":{"start":1755930243273,"stop":1755930243273,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1755930243273,"stop":1755930243273,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clouds_yaml_contents","time":{"start":1755930243273,"stop":1755930243273,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_config","time":{"start":1755930243273,"stop":1755930243273,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flavor_name","time":{"start":1755930243273,"stop":1755930243273,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_model_proxy","time":{"start":1755930243273,"stop":1755930243285,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1755930243285,"stop":1755930243304,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1755930243304,"stop":1755930245338,"duration":2034},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1755930245338,"stop":1755931473006,"duration":1227668},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_no_runner","time":{"start":1755931473006,"stop":1755931488161,"duration":15155},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1755931488161,"stop":1755931488162,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app","time":{"start":1755931488162,"stop":1755931650504,"duration":162342},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1755931488162,"stop":1755931488162,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver","time":{"start":1755931488162,"stop":1755931488162,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_for_reactive","time":{"start":1755931650504,"stop":1755932322958,"duration":672454},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Test reactive mode together with jobmanager.\n\n    Test that after putting a job in the queue that the runner is registered and the\n    job is picked up.\n\n    So,\n    1. Put job in the queue\n    2. Wait for runner to be registered\n    3. Wait for reactive process to ask for job status\n    4. Mark job deletable\n    5. Reconcile\n    6. Assert queue is empty\n    ","status":"passed","steps":[],"attachments":[{"uid":"53087ff0153a9b15","name":"log","source":"53087ff0153a9b15.txt","type":"text/plain","size":45665}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"app_for_reactive::finalizer","time":{"start":1755933152917,"stop":1755933307955,"duration":155038},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app::finalizer","time":{"start":1755933307955,"stop":1755933446222,"duration":138267},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1755933446223,"stop":1755933446223,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_no_runner::finalizer","time":{"start":1755933446224,"stop":1755933446224,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner::finalizer","time":{"start":1755933446225,"stop":1755933446225,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1755933446225,"stop":1755933446422,"duration":197},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1755933446422,"stop":1755933446553,"duration":131},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::finalizer","time":{"start":1755933446558,"stop":1755933446558,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1755933446559,"stop":1755933446965,"duration":406},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1755933446966,"stop":1755933446966,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1755933446966,"stop":1755933446966,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1755933446966,"stop":1755933446966,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_httpserver::0","time":{"start":1755933446967,"stop":1755933447441,"duration":474},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"openstack"},{"name":"parentSuite","value":"tests.integration.jobmanager"},{"name":"suite","value":"test_jobmanager_reactive"},{"name":"host","value":"github-runner"},{"name":"thread","value":"12325-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.jobmanager.test_jobmanager_reactive"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"828fbc922e0207a9","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":11,"skipped":0,"passed":32,"unknown":2,"total":45},"items":[{"uid":"69cb65988e447c42","reportUrl":"../3444//#testresult/69cb65988e447c42","status":"passed","time":{"start":1755889142645,"stop":1755889970619,"duration":827974}},{"uid":"6e6f4543687ce823","reportUrl":"../3437//#testresult/6e6f4543687ce823","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\n  test-iugzsk6v/0 [idle] waiting: Waiting for image over integration.\n  github-runner-image-builder-iugzsk6v/0 [executing] active: Building image.","time":{"start":1755844667795,"stop":1755844667795,"duration":0}},{"uid":"27e91dc73edec641","reportUrl":"../3430//#testresult/27e91dc73edec641","status":"passed","time":{"start":1755802694422,"stop":1755803523334,"duration":828912}},{"uid":"e31b6a01f22af196","reportUrl":"../3424//#testresult/e31b6a01f22af196","status":"passed","time":{"start":1755759876053,"stop":1755760703721,"duration":827668}},{"uid":"33bfd4053a301bd5","reportUrl":"../3416//#testresult/33bfd4053a301bd5","status":"passed","time":{"start":1755673363110,"stop":1755674192286,"duration":829176}},{"uid":"d3cab1e09e759fcd","reportUrl":"../3410//#testresult/d3cab1e09e759fcd","status":"passed","time":{"start":1755635283216,"stop":1755636114826,"duration":831610}},{"uid":"79d86735db159ddb","reportUrl":"../3390//#testresult/79d86735db159ddb","status":"passed","time":{"start":1755588915774,"stop":1755589743252,"duration":827478}},{"uid":"50701894ebe43a07","reportUrl":"../3388//#testresult/50701894ebe43a07","status":"passed","time":{"start":1755543703697,"stop":1755544593500,"duration":889803}},{"uid":"345ba5693d2eff78","reportUrl":"../3387//#testresult/345ba5693d2eff78","status":"passed","time":{"start":1755500447754,"stop":1755501275347,"duration":827593}},{"uid":"cf20e7e162609a8d","reportUrl":"../3386//#testresult/cf20e7e162609a8d","status":"passed","time":{"start":1755457218929,"stop":1755458047178,"duration":828249}},{"uid":"33ff432d70fd5dce","reportUrl":"../3385//#testresult/33ff432d70fd5dce","status":"passed","time":{"start":1755414326345,"stop":1755415155962,"duration":829617}},{"uid":"fbdb8c46e8485fdd","reportUrl":"../3384//#testresult/fbdb8c46e8485fdd","status":"unknown","time":{}},{"uid":"f6210a09a121f2d7","reportUrl":"../3383//#testresult/f6210a09a121f2d7","status":"passed","time":{"start":1755327649719,"stop":1755328478444,"duration":828725}},{"uid":"5693543a7c91ae0f","reportUrl":"../3378//#testresult/5693543a7c91ae0f","status":"passed","time":{"start":1755284585574,"stop":1755285416821,"duration":831247}},{"uid":"a5d3d9946bd6d6c7","reportUrl":"../3377//#testresult/a5d3d9946bd6d6c7","status":"passed","time":{"start":1755241264444,"stop":1755242094596,"duration":830152}},{"uid":"18a88a314297d4ac","reportUrl":"../3374//#testresult/18a88a314297d4ac","status":"passed","time":{"start":1755177010739,"stop":1755177838806,"duration":828067}},{"uid":"d8da9a60b8a18e72","reportUrl":"../3367//#testresult/d8da9a60b8a18e72","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-kvz74i9y/0","time":{"start":1755109554820,"stop":1755109554820,"duration":0}},{"uid":"a0ae0d20538ae128","reportUrl":"../3365//#testresult/a0ae0d20538ae128","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-uxeak4rc/0","time":{"start":1755070191825,"stop":1755070191825,"duration":0}},{"uid":"b3dacbaa98942ecb","reportUrl":"../3357//#testresult/b3dacbaa98942ecb","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-bj9qzvyk/0","time":{"start":1755023223781,"stop":1755023223781,"duration":0}},{"uid":"7a69e4b57937889b","reportUrl":"../3353//#testresult/7a69e4b57937889b","status":"broken","statusDetails":"TimeoutError","time":{"start":1754991084301,"stop":1754991698162,"duration":613861}}]},"tags":["asyncio","abort_on_fail","openstack"]},"source":"e0dbcbc2b9ee9b72.json","parameterValues":[]}