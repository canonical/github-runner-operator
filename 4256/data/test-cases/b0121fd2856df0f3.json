{"uid":"b0121fd2856df0f3","name":"test_prometheus_metrics","fullName":"tests.integration.test_prometheus_metrics#test_prometheus_metrics","historyId":"8ad402f8a81c79aa3fa21a6fb8e0f79a","time":{"start":1765241283798,"stop":1765241760189,"duration":476391},"description":"\n    arrange: given a prometheus charm application.\n    act: when GitHub runner is integrated.\n    assert: the datasource is registered and basic metrics are available.\n    ","descriptionHtml":"<pre><code>arrange: given a prometheus charm application.\nact: when GitHub runner is integrated.\nassert: the datasource is registered and basic metrics are available.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"pytestconfig","time":{"start":1765240914591,"stop":1765240914591,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"k8s_juju","time":{"start":1765240914591,"stop":1765240914812,"duration":221},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1765240914591,"stop":1765240914591,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1765240914591,"stop":1765240914591,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"prometheus_app","time":{"start":1765240914812,"stop":1765240943890,"duration":29078},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"grafana_app","time":{"start":1765240943890,"stop":1765241025234,"duration":81344},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"traefik_ingress","time":{"start":1765241025234,"stop":1765241026737,"duration":1503},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1765241026737,"stop":1765241027332,"duration":595},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1765241027332,"stop":1765241027339,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"proxy_config","time":{"start":1765241027332,"stop":1765241027332,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1765241027339,"stop":1765241027359,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1765241027359,"stop":1765241027359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_config","time":{"start":1765241027359,"stop":1765241027359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1765241027359,"stop":1765241027360,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1765241027359,"stop":1765241027359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1765241027359,"stop":1765241027359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1765241027359,"stop":1765241027359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_config","time":{"start":1765241027359,"stop":1765241027359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_config","time":{"start":1765241027360,"stop":1765241027360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1765241027360,"stop":1765241027376,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1765241027376,"stop":1765241029928,"duration":2552},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dockerhub_mirror","time":{"start":1765241029928,"stop":1765241029928,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1765241029928,"stop":1765241233441,"duration":203513},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_app_cos_agent","time":{"start":1765241233441,"stop":1765241279622,"duration":46181},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"grafana_password","time":{"start":1765241279622,"stop":1765241281306,"duration":1684},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_client","time":{"start":1765241281306,"stop":1765241281545,"duration":239},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_repository","time":{"start":1765241281545,"stop":1765241282097,"duration":552},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch","time":{"start":1765241282097,"stop":1765241283797,"duration":1700},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1765241283797,"stop":1765241283797,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1765241283797,"stop":1765241283797,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: given a prometheus charm application.\n    act: when GitHub runner is integrated.\n    assert: the datasource is registered and basic metrics are available.\n    ","status":"passed","steps":[],"attachments":[{"uid":"c1f806f44a29e146","name":"log","source":"c1f806f44a29e146.txt","type":"text/plain","size":180620}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_github_branch::finalizer","time":{"start":1765241760189,"stop":1765241760679,"duration":490},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1765241760189,"stop":1765241760189,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner::finalizer","time":{"start":1765241760680,"stop":1765241760680,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1765241760680,"stop":1765241760680,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1765241760681,"stop":1765241761035,"duration":354},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::finalizer","time":{"start":1765241761036,"stop":1765241761036,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1765241761037,"stop":1765241761383,"duration":346},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"k8s_juju::0","time":{"start":1765241761384,"stop":1765241761384,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1765241761384,"stop":1765241761385,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1765241761385,"stop":1765241761385,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1765241761385,"stop":1765241761385,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"openstack"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_prometheus_metrics"},{"name":"host","value":"github-runner"},{"name":"thread","value":"22323-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_prometheus_metrics"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"a0c94d57e407eb85","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":7,"broken":109,"skipped":0,"passed":97,"unknown":10,"total":223},"items":[{"uid":"92348cf650bd8a3c","reportUrl":"../4253//#testresult/92348cf650bd8a3c","status":"passed","time":{"start":1765175151139,"stop":1765175626240,"duration":475101}},{"uid":"79536c89d6f0dda1","reportUrl":"../4251//#testresult/79536c89d6f0dda1","status":"passed","time":{"start":1765131992988,"stop":1765132469252,"duration":476264}},{"uid":"64a2a2f8952f4a11","reportUrl":"../4250//#testresult/64a2a2f8952f4a11","status":"passed","time":{"start":1765088691674,"stop":1765089173101,"duration":481427}},{"uid":"d1454cce16492f47","reportUrl":"../4249//#testresult/d1454cce16492f47","status":"passed","time":{"start":1765045467565,"stop":1765045942723,"duration":475158}},{"uid":"c83382f53ddd75d5","reportUrl":"../4235//#testresult/c83382f53ddd75d5","status":"passed","time":{"start":1765002291795,"stop":1765002768249,"duration":476454}},{"uid":"9618ab374f902d11","reportUrl":"../4232//#testresult/9618ab374f902d11","status":"passed","time":{"start":1764959388996,"stop":1764959926034,"duration":537038}},{"uid":"6bc6e70a79f3d64d","reportUrl":"../4218//#testresult/6bc6e70a79f3d64d","status":"passed","time":{"start":1764915970243,"stop":1764916446877,"duration":476634}},{"uid":"91b855fecd214d37","reportUrl":"../4217//#testresult/91b855fecd214d37","status":"passed","time":{"start":1764873066057,"stop":1764873543673,"duration":477616}},{"uid":"26717f91e09a8a07","reportUrl":"../4204//#testresult/26717f91e09a8a07","status":"failed","statusDetails":"AssertionError: Please specify the --openstack-network-name command line option\nassert ''","time":{"start":1764829174979,"stop":1764829174979,"duration":0}},{"uid":"8d2f34b2a665234","reportUrl":"../4203//#testresult/8d2f34b2a665234","status":"failed","statusDetails":"AssertionError: Please specify the --openstack-network-name command line option\nassert ''","time":{"start":1764785965568,"stop":1764785965568,"duration":0}},{"uid":"66ef14f73913d1e8","reportUrl":"../4184//#testresult/66ef14f73913d1e8","status":"passed","time":{"start":1764745805123,"stop":1764746281790,"duration":476667}},{"uid":"2571ec20f06a65f6","reportUrl":"../4171//#testresult/2571ec20f06a65f6","status":"broken","statusDetails":"jubilant._juju.CLIError: Command '['juju', 'deploy', '--model', 'microk8s:microk8s:jubilant-9b9c2eb1', 'prometheus-k8s', '--channel', '1/stable']' returned non-zero exit status 2.\nStderr:\nERROR model name \"admin/microk8s:jubilant-9b9c2eb1\" not valid","time":{"start":1764699622710,"stop":1764699622710,"duration":0}},{"uid":"71ad48aa4a067289","reportUrl":"../4164//#testresult/71ad48aa4a067289","status":"broken","statusDetails":"jubilant._juju.CLIError: Command '['juju', 'deploy', '--model', 'microk8s:microk8s:jubilant-73f7cb0d', 'prometheus-k8s', '--channel', '1/stable']' returned non-zero exit status 2.\nStderr:\nERROR model name \"admin/microk8s:jubilant-73f7cb0d\" not valid","time":{"start":1764657409789,"stop":1764657409789,"duration":0}},{"uid":"fa28ee10787032ad","reportUrl":"../4157//#testresult/fa28ee10787032ad","status":"broken","statusDetails":"jubilant._juju.CLIError: Command '['juju', 'deploy', '--model', 'microk8s:microk8s:jubilant-93730fbe', 'prometheus-k8s', '--channel', '1/stable']' returned non-zero exit status 2.\nStderr:\nERROR model name \"admin/microk8s:jubilant-93730fbe\" not valid","time":{"start":1764613669742,"stop":1764613669742,"duration":0}},{"uid":"c12e3a7e7d907955","reportUrl":"../4146//#testresult/c12e3a7e7d907955","status":"broken","statusDetails":"jubilant._juju.CLIError: Command '['juju', 'deploy', '--model', 'microk8s:microk8s:jubilant-992d7543', 'prometheus-k8s', '--channel', '1/stable']' returned non-zero exit status 2.\nStderr:\nERROR model name \"admin/microk8s:jubilant-992d7543\" not valid","time":{"start":1764585897527,"stop":1764585897527,"duration":0}},{"uid":"d04b35aa2076c347","reportUrl":"../4138//#testresult/d04b35aa2076c347","status":"passed","time":{"start":1764527809400,"stop":1764528280793,"duration":471393}},{"uid":"bc40da72d837013","reportUrl":"../4127//#testresult/bc40da72d837013","status":"passed","time":{"start":1764484324857,"stop":1764484798312,"duration":473455}},{"uid":"9d96989cc0a8d48f","reportUrl":"../4126//#testresult/9d96989cc0a8d48f","status":"passed","time":{"start":1764441218259,"stop":1764441685897,"duration":467638}},{"uid":"15f6c1db653f922f","reportUrl":"../4125//#testresult/15f6c1db653f922f","status":"failed","statusDetails":"AssertionError: Timeout waiting for runner to be ready","time":{"start":1764421190858,"stop":1764422121977,"duration":931119}},{"uid":"88079a95cb152de5","reportUrl":"../4099//#testresult/88079a95cb152de5","status":"unknown","time":{}}]},"tags":["asyncio","openstack"]},"source":"b0121fd2856df0f3.json","parameterValues":[]}