{"uid":"8e7b6698e23b8002","name":"test_charm_issues_metrics_for_failed_repo_policy","fullName":"tests.integration.test_charm_metrics_failure#test_charm_issues_metrics_for_failed_repo_policy","historyId":"3e462e3ac295b69113097bb9edb5fd51","time":{"start":1766255048166,"stop":1766255483603,"duration":435437},"description":"\n    arrange: A properly integrated charm with a runner registered on the fork repo.\n    act: Dispatch a test workflow that fails the repo-policy check. After completion, reconcile.\n    assert: The RunnerStart, RunnerStop and Reconciliation metric is logged.\n        The Reconciliation metric has the post job status set to failure.\n    ","descriptionHtml":"<pre><code>arrange: A properly integrated charm with a runner registered on the fork repo.\nact: Dispatch a test workflow that fails the repo-policy check. After completion, reconcile.\nassert: The RunnerStart, RunnerStop and Reconciliation metric is logged.\n    The Reconciliation metric has the post job status set to failure.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1766254674400,"stop":1766254674400,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_config","time":{"start":1766254674401,"stop":1766254674401,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_client","time":{"start":1766254674401,"stop":1766254674641,"duration":240},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1766254674401,"stop":1766254674401,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_repository","time":{"start":1766254674641,"stop":1766254675192,"duration":551},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"forked_github_repository","time":{"start":1766254675192,"stop":1766254688557,"duration":13365},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"forked_github_branch","time":{"start":1766254688557,"stop":1766254689771,"duration":1214},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_app","time":{"start":1766254689771,"stop":1766254892376,"duration":202605},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"proxy_config","time":{"start":1766254689771,"stop":1766254689771,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1766254689772,"stop":1766254690206,"duration":434},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1766254689772,"stop":1766254689772,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1766254690206,"stop":1766254690212,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_config","time":{"start":1766254690212,"stop":1766254690212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1766254690212,"stop":1766254690212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1766254690212,"stop":1766254690212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1766254690212,"stop":1766254690212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_config","time":{"start":1766254690212,"stop":1766254690212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1766254690212,"stop":1766254690212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1766254690212,"stop":1766254690212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1766254690213,"stop":1766254690227,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1766254690227,"stop":1766254692204,"duration":1977},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1766254692204,"stop":1766254892376,"duration":200172},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dockerhub_mirror","time":{"start":1766254692204,"stop":1766254692204,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_for_metric","time":{"start":1766254892376,"stop":1766254892376,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1766254892376,"stop":1766254892376,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app","time":{"start":1766254892377,"stop":1766255048165,"duration":155788},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1766255048165,"stop":1766255048165,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: A properly integrated charm with a runner registered on the fork repo.\n    act: Dispatch a test workflow that fails the repo-policy check. After completion, reconcile.\n    assert: The RunnerStart, RunnerStop and Reconciliation metric is logged.\n        The Reconciliation metric has the post job status set to failure.\n    ","status":"passed","steps":[],"attachments":[{"uid":"2e4ec5057f8ce40d","name":"log","source":"2e4ec5057f8ce40d.txt","type":"text/plain","size":7412}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"app::finalizer","time":{"start":1766255483604,"stop":1766255483604,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1766255483604,"stop":1766255483604,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_for_metric::finalizer","time":{"start":1766256076301,"stop":1766256076301,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1766256076302,"stop":1766256076410,"duration":108},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1766256076302,"stop":1766256076302,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner::finalizer","time":{"start":1766256076302,"stop":1766256076302,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1766256076412,"stop":1766256076712,"duration":300},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"forked_github_branch::0","time":{"start":1766256076712,"stop":1766256077553,"duration":841},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1766256077554,"stop":1766256077555,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1766256077555,"stop":1766256077555,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1766256077555,"stop":1766256077555,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"openstack"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_charm_metrics_failure"},{"name":"host","value":"github-runner"},{"name":"thread","value":"11304-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_charm_metrics_failure"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f1f90ec5a8684598","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":40,"broken":142,"skipped":0,"passed":214,"unknown":16,"total":412},"items":[{"uid":"b00a5f4bb6e0e18c","reportUrl":"../4463//#testresult/b00a5f4bb6e0e18c","status":"passed","time":{"start":1766211897163,"stop":1766212333466,"duration":436303}},{"uid":"cef15b6a5048f65e","reportUrl":"../4462//#testresult/cef15b6a5048f65e","status":"passed","time":{"start":1766168682968,"stop":1766169329888,"duration":646920}},{"uid":"6d62945487e6a7ae","reportUrl":"../4458//#testresult/6d62945487e6a7ae","status":"failed","statusDetails":"AssertionError: Failed to create workflow","time":{"start":1766125498029,"stop":1766125886452,"duration":388423}},{"uid":"492e50dedce2f9e0","reportUrl":"../4445//#testresult/492e50dedce2f9e0","status":"passed","time":{"start":1766082327922,"stop":1766082770895,"duration":442973}},{"uid":"f475e2b8c22ec4d7","reportUrl":"../4435//#testresult/f475e2b8c22ec4d7","status":"broken","statusDetails":"openstack.exceptions.HttpException: HttpException: 500: Server Error for url: https://nova.ps7.canonical.com:8774/v2.1/servers/detail, Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'KeyError'>","time":{"start":1766039160396,"stop":1766039564602,"duration":404206}},{"uid":"c26e7c8f23ab3881","reportUrl":"../4408//#testresult/c26e7c8f23ab3881","status":"passed","time":{"start":1765996011990,"stop":1765996450487,"duration":438497}},{"uid":"27a1d117260eab73","reportUrl":"../4370//#testresult/27a1d117260eab73","status":"passed","time":{"start":1765937971680,"stop":1765938413465,"duration":441785}},{"uid":"7d39800d8ce1831a","reportUrl":"../4344//#testresult/7d39800d8ce1831a","status":"failed","statusDetails":"AssertionError: Timeout waiting for runner to be ready","time":{"start":1765852749728,"stop":1765853613493,"duration":863765}},{"uid":"12a4ff0a35e6e96d","reportUrl":"../4332//#testresult/12a4ff0a35e6e96d","status":"passed","time":{"start":1765607091540,"stop":1765607527651,"duration":436111}},{"uid":"63b6dc009862a20","reportUrl":"../4330//#testresult/63b6dc009862a20","status":"passed","time":{"start":1765563950815,"stop":1765564387342,"duration":436527}},{"uid":"b97394cd6042632c","reportUrl":"../4312//#testresult/b97394cd6042632c","status":"passed","time":{"start":1765520782900,"stop":1765521222128,"duration":439228}},{"uid":"ccf7590a47b41800","reportUrl":"../4297//#testresult/ccf7590a47b41800","status":"passed","time":{"start":1765477465117,"stop":1765478243387,"duration":778270}},{"uid":"6aa71e21e9eaee0a","reportUrl":"../4292//#testresult/6aa71e21e9eaee0a","status":"passed","time":{"start":1765434415075,"stop":1765434856202,"duration":441127}},{"uid":"b9bfe923a0f5c9b4","reportUrl":"../4277//#testresult/b9bfe923a0f5c9b4","status":"passed","time":{"start":1765391144985,"stop":1765391583062,"duration":438077}},{"uid":"7460d8fb14550a4c","reportUrl":"../4270//#testresult/7460d8fb14550a4c","status":"passed","time":{"start":1765304701606,"stop":1765305141227,"duration":439621}},{"uid":"32c03ccc097d2e75","reportUrl":"../4264//#testresult/32c03ccc097d2e75","status":"passed","time":{"start":1765261529297,"stop":1765261966013,"duration":436716}},{"uid":"6acc0f17c524668e","reportUrl":"../4256//#testresult/6acc0f17c524668e","status":"passed","time":{"start":1765241072941,"stop":1765241509298,"duration":436357}},{"uid":"85f9d39a3b8373a9","reportUrl":"../4253//#testresult/85f9d39a3b8373a9","status":"passed","time":{"start":1765175152016,"stop":1765175588430,"duration":436414}},{"uid":"6cc107b2d81cb0ca","reportUrl":"../4251//#testresult/6cc107b2d81cb0ca","status":"passed","time":{"start":1765131904388,"stop":1765132338636,"duration":434248}},{"uid":"c316bd438e31997b","reportUrl":"../4250//#testresult/c316bd438e31997b","status":"passed","time":{"start":1765088680974,"stop":1765089116787,"duration":435813}}]},"tags":["asyncio","abort_on_fail","openstack"]},"source":"8e7b6698e23b8002.json","parameterValues":[]}