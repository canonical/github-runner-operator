{"uid":"abcc16a1ce0ea52e","name":"test_flush_runner_and_resource_config","fullName":"tests.integration.test_charm_runner#test_flush_runner_and_resource_config","historyId":"67136ca3912cd0242f3fc7742c7d8c81","time":{"start":1735543131591,"stop":1735543573826,"duration":442235},"description":"\n    arrange: A working application with one runner.\n    act:\n        1. Run Check_runner action. Record the runner name for later.\n        2. Nothing.\n        3. Change the virtual machine resource configuration.\n        4. Run flush_runner action.\n        5. Dispatch a workflow to make runner busy and call flush_runner action.\n\n    assert:\n        1. One runner exists.\n        2. Check the resource matches the configuration.\n        3. Nothing.\n        4.  a. The runner name should be different to the runner prior running\n                the action.\n            b. LXD profile matching virtual machine resources of step 2 exists.\n        5. The runner is not flushed since by default it flushes idle. (Only valid for OpenStack)\n\n    Test are combined to reduce number of runner spawned.\n    ","descriptionHtml":"<pre><code>arrange: A working application with one runner.\nact:\n    1. Run Check_runner action. Record the runner name for later.\n    2. Nothing.\n    3. Change the virtual machine resource configuration.\n    4. Run flush_runner action.\n    5. Dispatch a workflow to make runner busy and call flush_runner action.\n\nassert:\n    1. One runner exists.\n    2. Check the resource matches the configuration.\n    3. Nothing.\n    4.  a. The runner name should be different to the runner prior running\n            the action.\n        b. LXD profile matching virtual machine resources of step 2 exists.\n    5. The runner is not flushed since by default it flushes idle. (Only valid for OpenStack)\n\nTest are combined to reduce number of runner spawned.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1735542163384,"stop":1735542163385,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1735542163385,"stop":1735542163385,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1735542163385,"stop":1735542163787,"duration":402},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1735542163385,"stop":1735542163385,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_clouds_yaml","time":{"start":1735542163787,"stop":1735542163787,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1735542163787,"stop":1735542163787,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_app","time":{"start":1735542163787,"stop":1735542541361,"duration":377574},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_type","time":{"start":1735542163787,"stop":1735542163787,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app","time":{"start":1735542163842,"stop":1735542163842,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token","time":{"start":1735542163842,"stop":1735542163842,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"path","time":{"start":1735542163842,"stop":1735542163842,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1735542163842,"stop":1735542163842,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_config","time":{"start":1735542163842,"stop":1735542163842,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clouds_yaml_contents","time":{"start":1735542163843,"stop":1735542163843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_clouds_yaml","time":{"start":1735542163843,"stop":1735542163843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1735542541362,"stop":1735542541383,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_client","time":{"start":1735542906610,"stop":1735542906969,"duration":359},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_repository","time":{"start":1735542906970,"stop":1735542907494,"duration":524},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch","time":{"start":1735542907494,"stop":1735542909356,"duration":1862},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1735542909357,"stop":1735542909357,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1735542909357,"stop":1735542909357,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app","time":{"start":1735542909357,"stop":1735543131591,"duration":222234},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: A working application with one runner.\n    act:\n        1. Run Check_runner action. Record the runner name for later.\n        2. Nothing.\n        3. Change the virtual machine resource configuration.\n        4. Run flush_runner action.\n        5. Dispatch a workflow to make runner busy and call flush_runner action.\n\n    assert:\n        1. One runner exists.\n        2. Check the resource matches the configuration.\n        3. Nothing.\n        4.  a. The runner name should be different to the runner prior running\n                the action.\n            b. LXD profile matching virtual machine resources of step 2 exists.\n        5. The runner is not flushed since by default it flushes idle. (Only valid for OpenStack)\n\n    Test are combined to reduce number of runner spawned.\n    ","status":"passed","steps":[],"attachments":[{"uid":"405a19458930a13a","name":"log","source":"405a19458930a13a.txt","type":"text/plain","size":608}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"app::finalizer","time":{"start":1735543573826,"stop":1735543659173,"duration":85347},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1735543659174,"stop":1735543659174,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch::finalizer","time":{"start":1735544247370,"stop":1735544247895,"duration":525},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1735544247896,"stop":1735544250257,"duration":2361},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1735544250261,"stop":1735544250684,"duration":423},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1735544250685,"stop":1735544250685,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1735544250685,"stop":1735544250685,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1735544250685,"stop":1735544250685,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"openstack"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_charm_runner"},{"name":"host","value":"github-runner"},{"name":"thread","value":"18514-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_charm_runner"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"221e1542ad018ea7","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":6,"broken":6,"skipped":4,"passed":2,"unknown":3,"total":21},"items":[{"uid":"15d9054ae35177c2","reportUrl":"../1690//#testresult/15d9054ae35177c2","status":"passed","time":{"start":1735497629363,"stop":1735498007446,"duration":378083}},{"uid":"a2b1386061203162","reportUrl":"../1689//#testresult/a2b1386061203162","status":"failed","statusDetails":"AssertionError: assert '0' == '1'\n  \n  - 1\n  + 0","time":{"start":1735457475489,"stop":1735457485568,"duration":10079}},{"uid":"722f0e57fa0ef034","reportUrl":"../1688//#testresult/722f0e57fa0ef034","status":"broken","statusDetails":"github.GithubException.BadCredentialsException: 401 {\"message\": \"Bad credentials\", \"documentation_url\": \"https://docs.github.com/rest\", \"status\": \"401\"}","time":{"start":1735417519391,"stop":1735417519391,"duration":0}},{"uid":"bb6deaefaf55c8a5","reportUrl":"../1687//#testresult/bb6deaefaf55c8a5","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1735367815730,"stop":1735367815730,"duration":0}},{"uid":"a763adcf49efde6","reportUrl":"../1686//#testresult/a763adcf49efde6","status":"failed","statusDetails":"AssertionError: assert '0' == '1'\n  \n  - 1\n  + 0","time":{"start":1735324884313,"stop":1735324891364,"duration":7051}},{"uid":"2f06d2cb45d9c0c2","reportUrl":"../1685//#testresult/2f06d2cb45d9c0c2","status":"broken","statusDetails":"github.GithubException.BadCredentialsException: 401 {\"message\": \"Bad credentials\", \"documentation_url\": \"https://docs.github.com/rest\", \"status\": \"401\"}","time":{"start":1735286251364,"stop":1735286251364,"duration":0}},{"uid":"be9ff701eb1afcdf","reportUrl":"../1684//#testresult/be9ff701eb1afcdf","status":"broken","statusDetails":"github.GithubException.BadCredentialsException: 401 {\"message\": \"Bad credentials\", \"documentation_url\": \"https://docs.github.com/rest\", \"status\": \"401\"}","time":{"start":1735243033081,"stop":1735243033081,"duration":0}},{"uid":"446fcad9c5e6cf98","reportUrl":"../1683//#testresult/446fcad9c5e6cf98","status":"failed","statusDetails":"AssertionError: assert '0' == '1'\n  \n  - 1\n  + 0","time":{"start":1735201207106,"stop":1735201588418,"duration":381312}},{"uid":"58a77bea4509c9a7","reportUrl":"../1682//#testresult/58a77bea4509c9a7","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\n  test-tu0qlzwk/0 [executing] maintenance: Reconciling runners","time":{"start":1735151640267,"stop":1735151640267,"duration":0}},{"uid":"93892dca4249d9fd","reportUrl":"../1681//#testresult/93892dca4249d9fd","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1735114240788,"stop":1735114240788,"duration":0}},{"uid":"9952324518268eb9","reportUrl":"../1680//#testresult/9952324518268eb9","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1735065657255,"stop":1735065657255,"duration":0}},{"uid":"1c7b692256b79187","reportUrl":"../1679//#testresult/1c7b692256b79187","status":"unknown","time":{}},{"uid":"a945e4b28f03d204","reportUrl":"../1678//#testresult/a945e4b28f03d204","status":"broken","statusDetails":"github.GithubException.BadCredentialsException: 401 {\"message\": \"Bad credentials\", \"documentation_url\": \"https://docs.github.com/rest\", \"status\": \"401\"}","time":{"start":1734983857089,"stop":1734983857089,"duration":0}},{"uid":"d95421321b046062","reportUrl":"../1677//#testresult/d95421321b046062","status":"unknown","time":{}},{"uid":"2fcd5163be029a6c","reportUrl":"../1676//#testresult/2fcd5163be029a6c","status":"broken","statusDetails":"github.GithubException.BadCredentialsException: 401 {\"message\": \"Bad credentials\", \"documentation_url\": \"https://docs.github.com/rest\", \"status\": \"401\"}","time":{"start":1734897443923,"stop":1734897443923,"duration":0}},{"uid":"7b0c4acd474b980f","reportUrl":"../1675//#testresult/7b0c4acd474b980f","status":"failed","statusDetails":"AssertionError: assert '0' == '1'\n  \n  - 1\n  + 0","time":{"start":1734849489920,"stop":1734849495965,"duration":6045}},{"uid":"b134a4a897bf44da","reportUrl":"../1674//#testresult/b134a4a897bf44da","status":"unknown","time":{}},{"uid":"b0e7e8671215078f","reportUrl":"../1671//#testresult/b0e7e8671215078f","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1734765718303,"stop":1734765718303,"duration":0}},{"uid":"8cf67177fa7e229b","reportUrl":"../1670//#testresult/8cf67177fa7e229b","status":"failed","statusDetails":"AssertionError: assert '0' == '1'\n  \n  - 1\n  + 0","time":{"start":1734723534468,"stop":1734723539510,"duration":5042}},{"uid":"49f9fd82d4459798","reportUrl":"../1667//#testresult/49f9fd82d4459798","status":"failed","statusDetails":"AssertionError: assert '0' == '1'\n  \n  - 1\n  + 0","time":{"start":1734702067591,"stop":1734702071626,"duration":4035}}]},"tags":["asyncio","abort_on_fail","openstack"]},"source":"abcc16a1ce0ea52e.json","parameterValues":[]}