06:25:12 WARNING unexpected facade SSHServer received from the controller
06:25:12 INFO Adding model github-pr-ed66e-lxd:test-charm-fork-path-change-85lv on cloud localhost
06:25:12 WARNING unexpected facade SSHServer received from the controller
06:25:12 WARNING unexpected facade SSHSession received from the controller
06:25:12 WARNING unexpected facade SSHTunneler received from the controller
06:25:15 INFO Deploying ch:amd64/jammy/github-runner-image-builder-68
06:25:15 INFO Waiting for model:
  github-runner-image-builder-dzat73v8/0 [allocating] waiting: waiting for machine
06:25:46 INFO Waiting for model:
  github-runner-image-builder-dzat73v8/0 [allocating] waiting: waiting for machine
06:26:16 INFO Waiting for model:
  github-runner-image-builder-dzat73v8/0 [allocating] waiting: waiting for machine
06:26:46 INFO Waiting for model:
  github-runner-image-builder-dzat73v8/0 [allocating] waiting: waiting for machine
06:27:17 INFO Waiting for model:
  github-runner-image-builder-dzat73v8/0 [allocating] waiting: waiting for machine
06:27:47 INFO Waiting for model:
  github-runner-image-builder-dzat73v8/0 [executing] maintenance: installing charm software
06:28:18 INFO Waiting for model:
  github-runner-image-builder-dzat73v8/0 [executing] maintenance: Setting up Builder.
06:28:48 INFO Waiting for model:
  github-runner-image-builder-dzat73v8/0 [executing] maintenance: Setting up Builder.
06:29:19 INFO Waiting for model:
  github-runner-image-builder-dzat73v8/0 [executing] maintenance: Setting up Builder.
06:29:49 INFO Waiting for model:
  github-runner-image-builder-dzat73v8/0 [executing] maintenance: Setting up Builder.
06:30:19 INFO Waiting for model:
  github-runner-image-builder-dzat73v8/0 [executing] maintenance: Setting up Builder.
06:30:57 INFO Deploying local:jammy/github-runner-0
06:30:57 INFO Waiting for model:
  test-dzat73v8/0 [allocating] waiting: waiting for machine
  github-runner-image-builder-dzat73v8/0 [idle] blocked: image integration required.
06:31:27 INFO Waiting for model:
  test-dzat73v8/0 [allocating] waiting: waiting for machine
  github-runner-image-builder-dzat73v8/0 [idle] blocked: image integration required.
06:31:57 INFO Waiting for model:
  test-dzat73v8/0 [executing] maintenance: installing charm software
  github-runner-image-builder-dzat73v8/0 [idle] blocked: image integration required.
06:32:27 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:32:58 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:33:28 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:33:58 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:34:29 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:34:59 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:35:29 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:36:00 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:36:30 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:37:01 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:37:31 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:38:01 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:38:31 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:39:01 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:39:31 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:40:01 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:40:31 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:41:02 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:41:32 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:42:02 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:42:32 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:43:03 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:43:33 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:44:04 INFO Waiting for model:
  test-dzat73v8/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dzat73v8/0 [executing] active: Building image.
06:44:34 INFO Waiting for model:
  test-dzat73v8/0 [executing] maintenance: Update image for runners
  github-runner-image-builder-dzat73v8/0 [idle] active: 
06:45:04 INFO Waiting for model:
  test-dzat73v8/0 [idle] active: 
06:45:07 INFO GitHub token rate limit: Rate(reset=2025-04-23 07:12:51+00:00, remaining=4885, limit=5000)
06:45:19 INFO test_path_config_change
06:45:19 INFO Waiting for model:
  test-dzat73v8/0 [idle] active: 
06:45:49 INFO Waiting for model:
  test-dzat73v8/0 [executing] maintenance: Reconciling runners
06:46:19 INFO Waiting for model:
  test-dzat73v8/0 [idle] active: 
06:46:32 INFO Ensure there is a runner (this calls reconcile)
06:49:01 INFO Waiting for model:
  test-dzat73v8/0 [executing] active: 
06:49:31 INFO Waiting for model:
  test-dzat73v8/0 [idle] active: 
06:49:39 INFO Reconciling (again)
06:52:39 INFO Waiting for model:
  test-dzat73v8/0 [executing] active: 
06:53:09 INFO Waiting for model:
  test-dzat73v8/0 [idle] active: 
06:53:15 INFO runners: ['test-dzat73v8-0-n-45125385e341']
06:53:16 INFO runners in github repo: [SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-2-n-01a04ef3d991"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-2-n-155318f3c634"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-2-n-2e03da65a889"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-2-n-3f5dea738da1"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-2-n-640bdc186746"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-2-n-6c1aedb096ad"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-2-n-a38e0dd2c367"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-2-n-c593d0d7768e"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-2-n-d4e56395db79"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps7-0-n-c187908ae1b4"), SelfHostedActionsRunner(name="test-a2mz4qmx-0-n-4a9197c659d2"), SelfHostedActionsRunner(name="test-asznkxsm-0-n-a6119532537e"), SelfHostedActionsRunner(name="test-b3akxcap-0-n-22da4721ffb6"), SelfHostedActionsRunner(name="test-bag4bstz-0-n-20b45615168a"), SelfHostedActionsRunner(name="test-bwd1pzcc-0-n-258f4a13dbc1"), SelfHostedActionsRunner(name="test-c3r4nkcf-0-n-10ffe75fe255"), SelfHostedActionsRunner(name="test-crj46zh7-0-n-0c9c62a421f1"), SelfHostedActionsRunner(name="test-cs1pchxg-0-n-2bd819f6c614"), SelfHostedActionsRunner(name="test-ct6p9boj-0-n-0a87d203c248"), SelfHostedActionsRunner(name="test-dzat73v8-0-n-45125385e341"), SelfHostedActionsRunner(name="test-e9hb1x9a-0-n-fd35828ad2f1"), SelfHostedActionsRunner(name="test-f86tpw3e-0-n-74e9c12c5404"), SelfHostedActionsRunner(name="test-fck27cq5-0-n-3396325f4e3f"), SelfHostedActionsRunner(name="test-gkcq2y16-0-n-1858b2a9852c"), SelfHostedActionsRunner(name="test-hnqbt9w1-0-n-19cb987f9c5b"), SelfHostedActionsRunner(name="test-hyhi0ggx-0-n-bc937dc11c65"), SelfHostedActionsRunner(name="test-iaw3j62k-0-n-5482efff533c"), SelfHostedActionsRunner(name="test-j5vanmfb-0-n-9eeeca737136"), SelfHostedActionsRunner(name="test-jzzagvg3-0-n-3da3735ae6f7"), SelfHostedActionsRunner(name="test-l78drix6-0-n-cc0f21a1e127"), SelfHostedActionsRunner(name="test-ne4zxh1c-0-n-1d235c28dcbd"), SelfHostedActionsRunner(name="test-o2ltth85-0-n-c30aa46c0115"), SelfHostedActionsRunner(name="test-o8smv84q-0-n-065e77708add"), SelfHostedActionsRunner(name="test-oanrroyl-0-n-ac3c3a53c917"), SelfHostedActionsRunner(name="test-ocwv1zno-0-n-bad8eb78c8c5"), SelfHostedActionsRunner(name="test-pjxuctcj-0-n-15cb8a72741a"), SelfHostedActionsRunner(name="test-q99wq659-0-n-5e2a415d32be"), SelfHostedActionsRunner(name="test-qbd4pjzj-0-n-86ceefbed04e"), SelfHostedActionsRunner(name="test-ro4xh6hp-0-n-f07303f88c45"), SelfHostedActionsRunner(name="test-ujz3gdm4-0-n-9883ba7348ea"), SelfHostedActionsRunner(name="test-vn7gv898-0-n-64341433b5b2"), SelfHostedActionsRunner(name="test-xp9tt8ml-0-n-d43009a544e9"), SelfHostedActionsRunner(name="test-yb7xtpl4-0-n-8c4bfca41647"), SelfHostedActionsRunner(name="test-yb7xtpl4-0-n-9ca6d859fb3c")]
06:53:18 INFO Model status:

Model                             Controller           Cloud/Region         Version  SLA          Timestamp
test-charm-fork-path-change-85lv  github-pr-ed66e-lxd  localhost/localhost  3.6.5    unsupported  06:53:18Z

App                                   Version  Status  Scale  Charm                        Channel      Rev  Exposed  Message
github-runner-image-builder-dzat73v8           active      1  github-runner-image-builder  latest/edge   68  no       
test-dzat73v8                                  active      1  github-runner                               0  no       

Unit                                     Workload  Agent  Machine  Public address  Ports  Message
github-runner-image-builder-dzat73v8/0*  active    idle   0        10.239.232.79          
test-dzat73v8/0*                         active    idle   1        10.239.232.3           

Machine  State    Address        Inst id        Base          AZ  Message
0        started  10.239.232.79  juju-d83358-0  ubuntu@22.04      Running
1        started  10.239.232.3   juju-d83358-1  ubuntu@22.04      Running

06:53:18 INFO Juju error logs:

machine-0: 06:27:40 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 06:27:40 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-github-runner-image-builder-dzat73v8-0: 06:27:40 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-github-runner-image-builder-dzat73v8-0: 06:28:15 ERROR unit.github-runner-image-builder-dzat73v8/0.juju-log Pipx command failed, code: 1, out: None, err: None
machine-1: 06:31:43 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 06:31:43 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-test-dzat73v8-0: 06:31:43 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-test-dzat73v8-0: 06:50:03 ERROR unit.test-dzat73v8/0.juju-log Health check failed due to unable to find keyfile for test-dzat73v8-0-n-073cc934e59e
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/openstack_cloud/openstack_runner_manager.py", line 463, in _check_state_and_flush
    ssh_conn = self._openstack_cloud.get_ssh_connection(instance)
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 116, in exception_handling_wrapper
    return func(*args, **kwargs)
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 313, in get_ssh_connection
    raise KeyfileError(
github_runner_manager.errors.KeyfileError: Missing keyfile for server: test-dzat73v8-0-n-073cc934e59e, key path: /home/runner-manager/.ssh/test-dzat73v8-0-n-073cc934e59e.key
unit-test-dzat73v8-0: 06:50:05 ERROR unit.test-dzat73v8/0.juju-log Unable to get SSH connection for instance test-dzat73v8-0-n-073cc934e59e, marking as unhealthy.
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/openstack_cloud/health_checks.py", line 132, in _get_ssh_connection
    ssh_conn = openstack_cloud.get_ssh_connection(instance)
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 116, in exception_handling_wrapper
    return func(*args, **kwargs)
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 313, in get_ssh_connection
    raise KeyfileError(
github_runner_manager.errors.KeyfileError: Missing keyfile for server: test-dzat73v8-0-n-073cc934e59e, key path: /home/runner-manager/.ssh/test-dzat73v8-0-n-073cc934e59e.key

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/openstack_cloud/health_checks.py", line 49, in check_runner
    ssh_conn = _get_ssh_connection(openstack_cloud=openstack_cloud, instance=instance)
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/utilities.py", line 77, in fn_with_retry
    return func(*args, **kwargs)
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/openstack_cloud/health_checks.py", line 135, in _get_ssh_connection
    raise _SSHError(f"Unable to get SSH connection to {instance.instance_id}") from exc
github_runner_manager.openstack_cloud.health_checks._SSHError: Unable to get SSH connection to test-dzat73v8-0-n-073cc934e59e
unit-test-dzat73v8-0: 06:50:05 ERROR unit.test-dzat73v8/0.juju-log Failed to get SSH connection while removing test-dzat73v8-0-n-073cc934e59e
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/openstack_cloud/openstack_runner_manager.py", line 315, in _delete_runner
    ssh_conn = self._openstack_cloud.get_ssh_connection(instance)
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 116, in exception_handling_wrapper
    return func(*args, **kwargs)
  File "/var/lib/juju/agents/unit-test-dzat73v8-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 313, in get_ssh_connection
    raise KeyfileError(
github_runner_manager.errors.KeyfileError: Missing keyfile for server: test-dzat73v8-0-n-073cc934e59e, key path: /home/runner-manager/.ssh/test-dzat73v8-0-n-073cc934e59e.key
unit-test-dzat73v8-0: 06:50:08 ERROR unit.test-dzat73v8/0.juju-log Invalid pulled metrics. No runner_installed information for test-dzat73v8-0-n-073cc934e59e.
unit-test-dzat73v8-0: 06:50:08 ERROR unit.test-dzat73v8/0.juju-log No metrics returned after deleting test-dzat73v8-0-n-073cc934e59e

06:53:18 INFO Forgetting model main...