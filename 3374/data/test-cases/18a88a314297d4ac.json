{"uid":"18a88a314297d4ac","name":"test_jobmanager_reactive","fullName":"tests.integration.jobmanager.test_jobmanager_reactive#test_jobmanager_reactive","historyId":"bcfc000091d2ee52821e468a61bfae99","time":{"start":1755177010739,"stop":1755177838806,"duration":828067},"description":"\n    Test reactive mode together with jobmanager.\n\n    Test that after putting a job in the queue that the runner is registered and the\n    job is picked up.\n\n    So,\n    1. Put job in the queue\n    2. Wait for runner to be registered\n    3. Wait for reactive process to ask for job status\n    4. Mark job deletable\n    5. Reconcile\n    6. Assert queue is empty\n    ","descriptionHtml":"<pre><code>Test reactive mode together with jobmanager.\n\nTest that after putting a job in the queue that the runner is registered and the\njob is picked up.\n\nSo,\n1. Put job in the queue\n2. Wait for runner to be registered\n3. Wait for reactive process to ask for job status\n4. Mark job deletable\n5. Reconcile\n6. Assert queue is empty\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"jobmanager_ip_address","time":{"start":1755174972151,"stop":1755174972152,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1755174972151,"stop":1755174972151,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_base_url","time":{"start":1755174972152,"stop":1755174972152,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_listen_address","time":{"start":1755174972152,"stop":1755174972152,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_token","time":{"start":1755174972152,"stop":1755174972152,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_listen_port","time":{"start":1755174972152,"stop":1755174972152,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1755174972152,"stop":1755174972152,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_ssl_context","time":{"start":1755174972153,"stop":1755174972153,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_httpserver","time":{"start":1755174972153,"stop":1755174972164,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1755174972165,"stop":1755174972165,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1755174972165,"stop":1755174972741,"duration":576},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"https_proxy","time":{"start":1755174972741,"stop":1755174972741,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"http_proxy","time":{"start":1755174972741,"stop":1755174972741,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"no_proxy","time":{"start":1755174972741,"stop":1755174972741,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1755174972742,"stop":1755174972750,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1755174972750,"stop":1755174972780,"duration":30},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mongodb","time":{"start":1755174972781,"stop":1755174975304,"duration":2523},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1755174972781,"stop":1755174972781,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_app","time":{"start":1755174975304,"stop":1755176154270,"duration":1178966},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_clouds_yaml","time":{"start":1755174975304,"stop":1755174975304,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1755174975304,"stop":1755174975304,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_https_proxy","time":{"start":1755174975305,"stop":1755174975305,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1755174975305,"stop":1755174975305,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token","time":{"start":1755174975305,"stop":1755174975305,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_http_proxy","time":{"start":1755174975305,"stop":1755174975305,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"path","time":{"start":1755174975305,"stop":1755174975305,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1755174975305,"stop":1755174975305,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clouds_yaml_contents","time":{"start":1755174975306,"stop":1755174975306,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_config","time":{"start":1755174975306,"stop":1755174975306,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"network_name","time":{"start":1755174975306,"stop":1755174975306,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_no_proxy","time":{"start":1755174975306,"stop":1755174975306,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_clouds_yaml","time":{"start":1755174975306,"stop":1755174975306,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_model_proxy","time":{"start":1755174975307,"stop":1755174975329,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_config","time":{"start":1755174975307,"stop":1755174975307,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1755174975307,"stop":1755174975307,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flavor_name","time":{"start":1755174975307,"stop":1755174975307,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1755174975329,"stop":1755174975357,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1755174975358,"stop":1755174977252,"duration":1894},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1755174977252,"stop":1755176154270,"duration":1177018},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_no_runner","time":{"start":1755176154270,"stop":1755176169494,"duration":15224},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1755176169494,"stop":1755176169494,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1755176169494,"stop":1755176169494,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver","time":{"start":1755176169495,"stop":1755176169495,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app","time":{"start":1755176169495,"stop":1755176334573,"duration":165078},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_for_reactive","time":{"start":1755176334573,"stop":1755177010738,"duration":676165},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Test reactive mode together with jobmanager.\n\n    Test that after putting a job in the queue that the runner is registered and the\n    job is picked up.\n\n    So,\n    1. Put job in the queue\n    2. Wait for runner to be registered\n    3. Wait for reactive process to ask for job status\n    4. Mark job deletable\n    5. Reconcile\n    6. Assert queue is empty\n    ","status":"passed","steps":[],"attachments":[{"uid":"61488a706451aa","name":"log","source":"61488a706451aa.txt","type":"text/plain","size":39363}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"app_for_reactive::finalizer","time":{"start":1755177838807,"stop":1755177995715,"duration":156908},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app::finalizer","time":{"start":1755177995716,"stop":1755178134155,"duration":138439},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_no_runner::finalizer","time":{"start":1755178134157,"stop":1755178134157,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1755178134157,"stop":1755178134157,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1755178134158,"stop":1755178134302,"duration":144},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner::finalizer","time":{"start":1755178134158,"stop":1755178134158,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1755178134303,"stop":1755178134441,"duration":138},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::finalizer","time":{"start":1755178134448,"stop":1755178134448,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1755178134450,"stop":1755178134905,"duration":455},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1755178134906,"stop":1755178134906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1755178134906,"stop":1755178134906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1755178134906,"stop":1755178134906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_httpserver::0","time":{"start":1755178134907,"stop":1755178135360,"duration":453},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"openstack"},{"name":"parentSuite","value":"tests.integration.jobmanager"},{"name":"suite","value":"test_jobmanager_reactive"},{"name":"host","value":"github-runner"},{"name":"thread","value":"11118-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.jobmanager.test_jobmanager_reactive"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f580b9e363c59813","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":10,"skipped":0,"passed":18,"unknown":1,"total":29},"items":[{"uid":"d8da9a60b8a18e72","reportUrl":"../3367//#testresult/d8da9a60b8a18e72","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-kvz74i9y/0","time":{"start":1755109554820,"stop":1755109554820,"duration":0}},{"uid":"a0ae0d20538ae128","reportUrl":"../3365//#testresult/a0ae0d20538ae128","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-uxeak4rc/0","time":{"start":1755070191825,"stop":1755070191825,"duration":0}},{"uid":"b3dacbaa98942ecb","reportUrl":"../3357//#testresult/b3dacbaa98942ecb","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-bj9qzvyk/0","time":{"start":1755023223781,"stop":1755023223781,"duration":0}},{"uid":"7a69e4b57937889b","reportUrl":"../3353//#testresult/7a69e4b57937889b","status":"broken","statusDetails":"TimeoutError","time":{"start":1754991084301,"stop":1754991698162,"duration":613861}},{"uid":"c4bad20273833221","reportUrl":"../3343//#testresult/c4bad20273833221","status":"passed","time":{"start":1754895554154,"stop":1754896382609,"duration":828455}},{"uid":"5e7ec54724b9da30","reportUrl":"../3342//#testresult/5e7ec54724b9da30","status":"passed","time":{"start":1754852282396,"stop":1754853110049,"duration":827653}},{"uid":"ae5b21f0e8d52e5a","reportUrl":"../3341//#testresult/ae5b21f0e8d52e5a","status":"passed","time":{"start":1754809199209,"stop":1754810027298,"duration":828089}},{"uid":"86a660090d677b85","reportUrl":"../3340//#testresult/86a660090d677b85","status":"passed","time":{"start":1754765894879,"stop":1754766722360,"duration":827481}},{"uid":"7c063bb9fd1b4669","reportUrl":"../3339//#testresult/7c063bb9fd1b4669","status":"passed","time":{"start":1754722778592,"stop":1754723608740,"duration":830148}},{"uid":"997ca65255d48d34","reportUrl":"../3337//#testresult/997ca65255d48d34","status":"passed","time":{"start":1754679682062,"stop":1754680510068,"duration":828006}},{"uid":"2cb2336c0612cee5","reportUrl":"../3336//#testresult/2cb2336c0612cee5","status":"passed","time":{"start":1754636444843,"stop":1754637273172,"duration":828329}},{"uid":"60d4fb96ff375351","reportUrl":"../3328//#testresult/60d4fb96ff375351","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\n  test-x5c1npe9/0 [idle] waiting: Waiting for image over integration.\n  github-runner-image-builder-x5c1npe9/0 [executing] active: Building image.","time":{"start":1754591193164,"stop":1754591193164,"duration":0}},{"uid":"bbbef9824a4eb543","reportUrl":"../3327//#testresult/bbbef9824a4eb543","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: test-l0p7a6zm/0","time":{"start":1754561364771,"stop":1754561364771,"duration":0}},{"uid":"601f1436e86d750c","reportUrl":"../3326//#testresult/601f1436e86d750c","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: test-y3mpk5mq/0","time":{"start":1754516268525,"stop":1754516268525,"duration":0}},{"uid":"433fdf53d21c1dc6","reportUrl":"../3315//#testresult/433fdf53d21c1dc6","status":"unknown","time":{}},{"uid":"5275046b8ccc31c4","reportUrl":"../3314//#testresult/5275046b8ccc31c4","status":"passed","time":{"start":1754420673415,"stop":1754421501928,"duration":828513}},{"uid":"7b66429f94a8f3e3","reportUrl":"../3312//#testresult/7b66429f94a8f3e3","status":"passed","time":{"start":1754377435050,"stop":1754378262882,"duration":827832}},{"uid":"2c17aff4be3f99b7","reportUrl":"../3311//#testresult/2c17aff4be3f99b7","status":"passed","time":{"start":1754333958367,"stop":1754334786204,"duration":827837}},{"uid":"38d15eaec5eafd3d","reportUrl":"../3302//#testresult/38d15eaec5eafd3d","status":"passed","time":{"start":1754291082920,"stop":1754291911870,"duration":828950}},{"uid":"d60e2507aa0274b6","reportUrl":"../3301//#testresult/d60e2507aa0274b6","status":"passed","time":{"start":1754247622280,"stop":1754248450139,"duration":827859}}]},"tags":["asyncio","abort_on_fail","openstack"]},"source":"18a88a314297d4ac.json","parameterValues":[]}