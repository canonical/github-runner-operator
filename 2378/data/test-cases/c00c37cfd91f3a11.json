{"uid":"c00c37cfd91f3a11","name":"test_reactive_mode_scale_down","fullName":"tests.integration.test_reactive#test_reactive_mode_scale_down","historyId":"bb6817de59a8aff167470484d2d33ee6","time":{"start":1744399345516,"stop":1744400228427,"duration":882911},"description":"\n    arrange: Scale down the number of virtual machines to 2 and spawn a job.\n    act:\n        1. Scale down the number of virtual machines to 0 and call reconcile.\n        2. Spawn a job.\n    assert:\n        1. The job fails.\n        2. The job is queued and there is a message in the queue.\n    ","descriptionHtml":"<pre><code>arrange: Scale down the number of virtual machines to 2 and spawn a job.\nact:\n    1. Scale down the number of virtual machines to 0 and call reconcile.\n    2. Spawn a job.\nassert:\n    1. The job fails.\n    2. The job is queued and there is a message in the queue.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1744397321444,"stop":1744397321445,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1744397321445,"stop":1744397322048,"duration":603},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1744397321445,"stop":1744397321445,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1744397321445,"stop":1744397321445,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_client","time":{"start":1744397322049,"stop":1744397322471,"duration":422},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token","time":{"start":1744397322049,"stop":1744397322049,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_repository","time":{"start":1744397322472,"stop":1744397323265,"duration":793},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"path","time":{"start":1744397322472,"stop":1744397322472,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch","time":{"start":1744397323265,"stop":1744397325563,"duration":2298},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1744397325563,"stop":1744397325563,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_clouds_yaml","time":{"start":1744397325563,"stop":1744397325564,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_no_proxy","time":{"start":1744397325564,"stop":1744397325564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1744397325564,"stop":1744397325564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_http_proxy","time":{"start":1744397325564,"stop":1744397325564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1744397325564,"stop":1744397325564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1744397325564,"stop":1744397325564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_https_proxy","time":{"start":1744397325564,"stop":1744397325564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1744397325564,"stop":1744397325564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1744397325565,"stop":1744397325565,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clouds_yaml_contents","time":{"start":1744397325565,"stop":1744397325565,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_clouds_yaml","time":{"start":1744397325565,"stop":1744397325565,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flavor_name","time":{"start":1744397325565,"stop":1744397325565,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"network_name","time":{"start":1744397325565,"stop":1744397325565,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_config","time":{"start":1744397325565,"stop":1744397325565,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_model_proxy","time":{"start":1744397325566,"stop":1744397325577,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1744397325577,"stop":1744397325611,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1744397325611,"stop":1744398064227,"duration":738616},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1744398064227,"stop":1744398701519,"duration":637292},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mongodb","time":{"start":1744398701520,"stop":1744398819353,"duration":117833},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_for_reactive","time":{"start":1744398819353,"stop":1744398862909,"duration":43556},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app","time":{"start":1744399288045,"stop":1744399345516,"duration":57471},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1744399288045,"stop":1744399288045,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: Scale down the number of virtual machines to 2 and spawn a job.\n    act:\n        1. Scale down the number of virtual machines to 0 and call reconcile.\n        2. Spawn a job.\n    assert:\n        1. The job fails.\n        2. The job is queued and there is a message in the queue.\n    ","status":"passed","steps":[],"attachments":[{"uid":"219d53944c5b5d0c","name":"log","source":"219d53944c5b5d0c.txt","type":"text/plain","size":15794}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"app::finalizer","time":{"start":1744400228427,"stop":1744400258652,"duration":30225},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1744400258653,"stop":1744400258653,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1744400258654,"stop":1744400259091,"duration":437},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1744400259092,"stop":1744400259883,"duration":791},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch::finalizer","time":{"start":1744400259886,"stop":1744400260447,"duration":561},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1744400260449,"stop":1744400260755,"duration":306},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1744400260756,"stop":1744400260756,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1744400260756,"stop":1744400260756,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1744400260756,"stop":1744400260756,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"openstack"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_reactive"},{"name":"host","value":"github-runner"},{"name":"thread","value":"10857-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_reactive"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"8bfe378abacc60c1","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":11,"broken":21,"skipped":2,"passed":34,"unknown":11,"total":79},"items":[{"uid":"ff4708ae9c9b651e","reportUrl":"../2362//#testresult/ff4708ae9c9b651e","status":"passed","time":{"start":1744356548096,"stop":1744357566884,"duration":1018788}},{"uid":"7e0cbc970c2a97c0","reportUrl":"../2358//#testresult/7e0cbc970c2a97c0","status":"passed","time":{"start":1744311259849,"stop":1744312291053,"duration":1031204}},{"uid":"6f43ec95052e66da","reportUrl":"../2336//#testresult/6f43ec95052e66da","status":"passed","time":{"start":1744226692881,"stop":1744227678562,"duration":985681}},{"uid":"784465615442a45","reportUrl":"../2312//#testresult/784465615442a45","status":"passed","time":{"start":1744181671513,"stop":1744182714358,"duration":1042845}},{"uid":"1b4b9ab03617d418","reportUrl":"../2310//#testresult/1b4b9ab03617d418","status":"passed","time":{"start":1744145398034,"stop":1744146422011,"duration":1023977}},{"uid":"95b95dba8bb09349","reportUrl":"../2293//#testresult/95b95dba8bb09349","status":"passed","time":{"start":1744096903728,"stop":1744097757082,"duration":853354}},{"uid":"a09c444b1aa0d993","reportUrl":"../2291//#testresult/a09c444b1aa0d993","status":"passed","time":{"start":1744053737556,"stop":1744054858978,"duration":1121422}},{"uid":"965cfd50b0f4ce53","reportUrl":"../2277//#testresult/965cfd50b0f4ce53","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:YB5ozjOuq4rD4l6TNqWh8VhiMKvma0ZU@10.227.190.123:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-h1crgx7g')","time":{"start":1743967278936,"stop":1743968094961,"duration":816025}},{"uid":"37bd75bfee79b528","reportUrl":"../2276//#testresult/37bd75bfee79b528","status":"passed","time":{"start":1743922541328,"stop":1743923437613,"duration":896285}},{"uid":"c5091e3d2beb7c53","reportUrl":"../2275//#testresult/c5091e3d2beb7c53","status":"passed","time":{"start":1743880643561,"stop":1743881700181,"duration":1056620}},{"uid":"fcd29832a994c5e","reportUrl":"../2274//#testresult/fcd29832a994c5e","status":"passed","time":{"start":1743837632930,"stop":1743838569097,"duration":936167}},{"uid":"efc2bdb02a173988","reportUrl":"../2273//#testresult/efc2bdb02a173988","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:drDJ8DOdR7W1koRzOrm4wClUk8QYPeVJ@10.164.132.122:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-x4s3wzaz')","time":{"start":1743792761359,"stop":1743793541911,"duration":780552}},{"uid":"51e67f0f8824c78b","reportUrl":"../2263//#testresult/51e67f0f8824c78b","status":"passed","time":{"start":1743753088132,"stop":1743753989153,"duration":901021}},{"uid":"af38d6f8514b07fc","reportUrl":"../2260//#testresult/af38d6f8514b07fc","status":"passed","time":{"start":1743708042598,"stop":1743708958472,"duration":915874}},{"uid":"139c1186b5efb255","reportUrl":"../2258//#testresult/139c1186b5efb255","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:0NN0jQ33KNpCBsbtq9UV5rqKV3MRutsi@10.35.51.212:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-s2s486q8')","time":{"start":1743665038198,"stop":1743666048255,"duration":1010057}},{"uid":"3a359ed96f9367dd","reportUrl":"../2257//#testresult/3a359ed96f9367dd","status":"passed","time":{"start":1743621495991,"stop":1743622541258,"duration":1045267}},{"uid":"f67d0466aab6d1bb","reportUrl":"../2254//#testresult/f67d0466aab6d1bb","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:t2OE36CEIZ0RObuc6nHvrZpaFUqN2nFe@10.218.199.25:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-q4ve3iof')","time":{"start":1743577971887,"stop":1743578946421,"duration":974534}},{"uid":"849a60653ea91e81","reportUrl":"../2252//#testresult/849a60653ea91e81","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:5AY0aysqXHkeAn7VHRZZlEBNCpEpDMQj@10.18.188.34:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-t34xdsyt')","time":{"start":1743535339110,"stop":1743536423064,"duration":1083954}},{"uid":"fcdddb3810cdc2f4","reportUrl":"../2250//#testresult/fcdddb3810cdc2f4","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:FHLeWu8nBRa6Sdst3lCNH3jtH6B0DoA8@10.132.213.155:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-a7oc0us2')","time":{"start":1743492338973,"stop":1743493254310,"duration":915337}},{"uid":"5dc86e42bb106844","reportUrl":"../2249//#testresult/5dc86e42bb106844","status":"failed","statusDetails":"AssertionError: assert 1 == 0\n +  where 1 = _get_queue_size('mongodb://relation-3:t1vkjLewvll1YzlcTm4G3QXCTaCo0FAF@10.55.236.64:27017/github-runner-webhook-router?replicaSet=mongodb&authSource=admin', 'test-o4lrfet1')","time":{"start":1743448490498,"stop":1743449458102,"duration":967604}}]},"tags":["asyncio","abort_on_fail","openstack"]},"source":"c00c37cfd91f3a11.json","parameterValues":[]}