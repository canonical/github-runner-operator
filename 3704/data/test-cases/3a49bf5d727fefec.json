{"uid":"3a49bf5d727fefec","name":"test_jobmanager_reactive","fullName":"tests.integration.jobmanager.test_jobmanager_reactive#test_jobmanager_reactive","historyId":"bcfc000091d2ee52821e468a61bfae99","time":{"start":1759216081292,"stop":1759216969959,"duration":888667},"description":"\n    Test reactive mode together with jobmanager.\n\n    Test that after putting a job in the queue that the runner is registered and the\n    job is picked up.\n\n    So,\n    1. Put job in the queue\n    2. Wait for runner to be registered\n    3. Wait for reactive process to ask for job status\n    4. Mark job deletable\n    5. Reconcile\n    6. Assert queue is empty\n    ","descriptionHtml":"<pre><code>Test reactive mode together with jobmanager.\n\nTest that after putting a job in the queue that the runner is registered and the\njob is picked up.\n\nSo,\n1. Put job in the queue\n2. Wait for runner to be registered\n3. Wait for reactive process to ask for job status\n4. Mark job deletable\n5. Reconcile\n6. Assert queue is empty\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1759213821911,"stop":1759213821911,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_ip_address","time":{"start":1759213821911,"stop":1759213821912,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_token","time":{"start":1759213821912,"stop":1759213821912,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_listen_port","time":{"start":1759213821912,"stop":1759213821912,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_base_url","time":{"start":1759213821912,"stop":1759213821912,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_ssl_context","time":{"start":1759213821912,"stop":1759213821912,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_httpserver","time":{"start":1759213821912,"stop":1759213821918,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_listen_address","time":{"start":1759213821912,"stop":1759213821912,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1759213821912,"stop":1759213821912,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1759213821918,"stop":1759213822305,"duration":387},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1759213821918,"stop":1759213821918,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"no_proxy","time":{"start":1759213822305,"stop":1759213822305,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"https_proxy","time":{"start":1759213822305,"stop":1759213822305,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1759213822305,"stop":1759213822310,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"http_proxy","time":{"start":1759213822305,"stop":1759213822305,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1759213822311,"stop":1759213822326,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1759213822326,"stop":1759213822326,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mongodb","time":{"start":1759213822327,"stop":1759213825408,"duration":3081},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_clouds_yaml","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"path","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_http_proxy","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_clouds_yaml","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_no_proxy","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_https_proxy","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clouds_yaml_contents","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_app","time":{"start":1759213825409,"stop":1759215236021,"duration":1410612},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_config","time":{"start":1759213825409,"stop":1759213825409,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flavor_name","time":{"start":1759213825410,"stop":1759213825410,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_model_proxy","time":{"start":1759213825410,"stop":1759213825420,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1759213825410,"stop":1759213825410,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_config","time":{"start":1759213825410,"stop":1759213825410,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"network_name","time":{"start":1759213825410,"stop":1759213825410,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1759213825420,"stop":1759213825437,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1759213825437,"stop":1759213827211,"duration":1774},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1759213827211,"stop":1759215236021,"duration":1408810},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_no_runner","time":{"start":1759215236021,"stop":1759215251511,"duration":15490},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1759215251511,"stop":1759215251511,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver","time":{"start":1759215251511,"stop":1759215251511,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1759215251511,"stop":1759215251511,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app","time":{"start":1759215251512,"stop":1759215409712,"duration":158200},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_for_reactive","time":{"start":1759215409712,"stop":1759216081291,"duration":671579},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Test reactive mode together with jobmanager.\n\n    Test that after putting a job in the queue that the runner is registered and the\n    job is picked up.\n\n    So,\n    1. Put job in the queue\n    2. Wait for runner to be registered\n    3. Wait for reactive process to ask for job status\n    4. Mark job deletable\n    5. Reconcile\n    6. Assert queue is empty\n    ","status":"passed","steps":[],"attachments":[{"uid":"f2b44f2fdbd55972","name":"log","source":"f2b44f2fdbd55972.txt","type":"text/plain","size":48865}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"app_for_reactive::finalizer","time":{"start":1759216969959,"stop":1759217125119,"duration":155160},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app::finalizer","time":{"start":1759217125119,"stop":1759217263242,"duration":138123},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1759217263243,"stop":1759217263243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner::finalizer","time":{"start":1759217263243,"stop":1759217263243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1759217263243,"stop":1759217263338,"duration":95},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_no_runner::finalizer","time":{"start":1759217263243,"stop":1759217263243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1759217263339,"stop":1759217263393,"duration":54},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::finalizer","time":{"start":1759217263395,"stop":1759217263395,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1759217263396,"stop":1759217263707,"duration":311},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1759217263708,"stop":1759217263708,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1759217263708,"stop":1759217263708,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1759217263708,"stop":1759217263708,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_httpserver::0","time":{"start":1759217263709,"stop":1759217263845,"duration":136},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"openstack"},{"name":"parentSuite","value":"tests.integration.jobmanager"},{"name":"suite","value":"test_jobmanager_reactive"},{"name":"host","value":"github-runner"},{"name":"thread","value":"15191-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.jobmanager.test_jobmanager_reactive"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"a2a0dbeafc68d542","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":27,"skipped":0,"passed":80,"unknown":3,"total":110},"items":[{"uid":"f72a5dc4f061ec0d","reportUrl":"../3697//#testresult/f72a5dc4f061ec0d","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-rp0rpdfd/0","time":{"start":1759170528021,"stop":1759170528021,"duration":0}},{"uid":"f901d96e9d64e8f2","reportUrl":"../3679//#testresult/f901d96e9d64e8f2","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: test-ce36emdk/0","time":{"start":1759127280443,"stop":1759127280443,"duration":0}},{"uid":"78f950259d45af58","reportUrl":"../3677//#testresult/78f950259d45af58","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: test-i24wvgog/0","time":{"start":1759084143607,"stop":1759084143607,"duration":0}},{"uid":"99965cd895b3e6dd","reportUrl":"../3676//#testresult/99965cd895b3e6dd","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-hxmzmbeg/0","time":{"start":1759040999536,"stop":1759040999536,"duration":0}},{"uid":"b41c9abb907a8db5","reportUrl":"../3675//#testresult/b41c9abb907a8db5","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: test-uabxigw8/0","time":{"start":1758997437833,"stop":1758997437833,"duration":0}},{"uid":"a29d288612177823","reportUrl":"../3674//#testresult/a29d288612177823","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: test-jzl4tjeu/0","time":{"start":1758954346545,"stop":1758954346545,"duration":0}},{"uid":"982081a22c5da619","reportUrl":"../3672//#testresult/982081a22c5da619","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: test-h3knxdar/0","time":{"start":1758911205538,"stop":1758911205538,"duration":0}},{"uid":"3bfa13727eb1ac3f","reportUrl":"../3669//#testresult/3bfa13727eb1ac3f","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: test-whtos491/0","time":{"start":1758824805491,"stop":1758824805491,"duration":0}},{"uid":"969e682d8e562901","reportUrl":"../3664//#testresult/969e682d8e562901","status":"passed","time":{"start":1758783662221,"stop":1758784492507,"duration":830286}},{"uid":"2b75d18ec450ebb","reportUrl":"../3659//#testresult/2b75d18ec450ebb","status":"passed","time":{"start":1758742608173,"stop":1758743437259,"duration":829086}},{"uid":"fb4dcdd82a88e7b0","reportUrl":"../3650//#testresult/fb4dcdd82a88e7b0","status":"passed","time":{"start":1758697359473,"stop":1758698188274,"duration":828801}},{"uid":"71116e2ad409022d","reportUrl":"../3647//#testresult/71116e2ad409022d","status":"passed","time":{"start":1758654157013,"stop":1758654987088,"duration":830075}},{"uid":"82cccf98c03d07a9","reportUrl":"../3643//#testresult/82cccf98c03d07a9","status":"passed","time":{"start":1758611090820,"stop":1758611981583,"duration":890763}},{"uid":"cad683c34fe178ad","reportUrl":"../3640//#testresult/cad683c34fe178ad","status":"passed","time":{"start":1758567723548,"stop":1758568553181,"duration":829633}},{"uid":"5eba52af1ff9b2b","reportUrl":"../3635//#testresult/5eba52af1ff9b2b","status":"passed","time":{"start":1758524582629,"stop":1758525411502,"duration":828873}},{"uid":"7c854bb8049b0495","reportUrl":"../3634//#testresult/7c854bb8049b0495","status":"passed","time":{"start":1758481221413,"stop":1758482049640,"duration":828227}},{"uid":"41387dee35f56bae","reportUrl":"../3633//#testresult/41387dee35f56bae","status":"passed","time":{"start":1758437938266,"stop":1758438767056,"duration":828790}},{"uid":"fd16a56d3dc46e21","reportUrl":"../3632//#testresult/fd16a56d3dc46e21","status":"passed","time":{"start":1758394988060,"stop":1758395817514,"duration":829454}},{"uid":"be09a27d352dfc9d","reportUrl":"../3631//#testresult/be09a27d352dfc9d","status":"passed","time":{"start":1758351814184,"stop":1758352644867,"duration":830683}},{"uid":"2ad0c405739792b2","reportUrl":"../3630//#testresult/2ad0c405739792b2","status":"passed","time":{"start":1758308490437,"stop":1758309323683,"duration":833246}}]},"tags":["asyncio","abort_on_fail","openstack"]},"source":"3a49bf5d727fefec.json","parameterValues":[]}