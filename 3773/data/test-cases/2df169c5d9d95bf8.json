{"uid":"2df169c5d9d95bf8","name":"test_prometheus_metrics","fullName":"tests.integration.test_prometheus_metrics#test_prometheus_metrics","historyId":"8ad402f8a81c79aa3fa21a6fb8e0f79a","time":{"start":1760684035386,"stop":1760684528050,"duration":492664},"description":"\n    arrange: given a prometheus charm application.\n    act: when GitHub runner is integrated.\n    assert: the datasource is registered and basic metrics are available.\n    ","descriptionHtml":"<pre><code>arrange: given a prometheus charm application.\nact: when GitHub runner is integrated.\nassert: the datasource is registered and basic metrics are available.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1760682451338,"stop":1760682451339,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1760682451339,"stop":1760682451339,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"k8s_juju","time":{"start":1760682451339,"stop":1760682451545,"duration":206},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1760682451339,"stop":1760682451339,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"prometheus_app","time":{"start":1760682451546,"stop":1760682477544,"duration":25998},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"grafana_app","time":{"start":1760682477544,"stop":1760682552329,"duration":74785},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"traefik_ingress","time":{"start":1760682552329,"stop":1760682554117,"duration":1788},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1760682554117,"stop":1760682554659,"duration":542},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"http_proxy","time":{"start":1760682554660,"stop":1760682554660,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1760682554660,"stop":1760682554669,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"no_proxy","time":{"start":1760682554660,"stop":1760682554660,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"https_proxy","time":{"start":1760682554660,"stop":1760682554660,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1760682554669,"stop":1760682554691,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_clouds_yaml","time":{"start":1760682554692,"stop":1760682554692,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1760682554692,"stop":1760682554692,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1760682554692,"stop":1760682554692,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token","time":{"start":1760682554692,"stop":1760682554693,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"path","time":{"start":1760682554692,"stop":1760682554692,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1760682554692,"stop":1760682554692,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1760682554692,"stop":1760682554692,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_config","time":{"start":1760682554693,"stop":1760682554693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clouds_yaml_contents","time":{"start":1760682554693,"stop":1760682554693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_clouds_yaml","time":{"start":1760682554693,"stop":1760682554693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_https_proxy","time":{"start":1760682554693,"stop":1760682554693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flavor_name","time":{"start":1760682554693,"stop":1760682554693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_http_proxy","time":{"start":1760682554693,"stop":1760682554693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_model_proxy","time":{"start":1760682554693,"stop":1760682554704,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"network_name","time":{"start":1760682554693,"stop":1760682554693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1760682554693,"stop":1760682554693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_config","time":{"start":1760682554693,"stop":1760682554693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_no_proxy","time":{"start":1760682554693,"stop":1760682554693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1760682554705,"stop":1760682554725,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1760682554725,"stop":1760682556502,"duration":1777},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1760682556502,"stop":1760684025374,"duration":1468872},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_app_cos_agent","time":{"start":1760684025374,"stop":1760684031215,"duration":5841},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"grafana_password","time":{"start":1760684031215,"stop":1760684032947,"duration":1732},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_client","time":{"start":1760684032947,"stop":1760684033166,"duration":219},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_repository","time":{"start":1760684033166,"stop":1760684033760,"duration":594},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch","time":{"start":1760684033760,"stop":1760684035385,"duration":1625},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1760684035385,"stop":1760684035385,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1760684035385,"stop":1760684035385,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: given a prometheus charm application.\n    act: when GitHub runner is integrated.\n    assert: the datasource is registered and basic metrics are available.\n    ","status":"passed","steps":[],"attachments":[{"uid":"5bfe39039f9cf032","name":"log","source":"5bfe39039f9cf032.txt","type":"text/plain","size":71884}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1760684528050,"stop":1760684528050,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch::finalizer","time":{"start":1760684528051,"stop":1760684528508,"duration":457},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1760684528509,"stop":1760684528876,"duration":367},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner::finalizer","time":{"start":1760684528509,"stop":1760684528509,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1760684528876,"stop":1760684528936,"duration":60},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::finalizer","time":{"start":1760684528938,"stop":1760684528938,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1760684528939,"stop":1760684529350,"duration":411},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"k8s_juju::0","time":{"start":1760684529350,"stop":1760684529350,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1760684529351,"stop":1760684529351,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1760684529351,"stop":1760684529351,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1760684529351,"stop":1760684529352,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"openstack"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_prometheus_metrics"},{"name":"host","value":"github-runner"},{"name":"thread","value":"25962-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_prometheus_metrics"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"5cc986abbb97aa9e","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":52,"skipped":0,"passed":81,"unknown":6,"total":139},"items":[{"uid":"c0ca9c984e0f9138","reportUrl":"../3772//#testresult/c0ca9c984e0f9138","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-fffby86y/0","time":{"start":1760639336853,"stop":1760639336853,"duration":0}},{"uid":"7d47bf7d09885bcb","reportUrl":"../3771//#testresult/7d47bf7d09885bcb","status":"unknown","time":{}},{"uid":"e8933e860cecf807","reportUrl":"../3769//#testresult/e8933e860cecf807","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-btnjtg6y/0","time":{"start":1760553310092,"stop":1760553310092,"duration":0}},{"uid":"a457855d904a1c9","reportUrl":"../3762//#testresult/a457855d904a1c9","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-b7ug8b8y/0","time":{"start":1760510155921,"stop":1760510155921,"duration":0}},{"uid":"e47b39ecaeffb832","reportUrl":"../3761//#testresult/e47b39ecaeffb832","status":"unknown","time":{}},{"uid":"d6a3dc60fc7dd4e3","reportUrl":"../3759//#testresult/d6a3dc60fc7dd4e3","status":"passed","time":{"start":1760425269149,"stop":1760425770338,"duration":501189}},{"uid":"1ed7b8d7b64a2240","reportUrl":"../3756//#testresult/1ed7b8d7b64a2240","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-i7pp0h1e/0","time":{"start":1760380108388,"stop":1760380108388,"duration":0}},{"uid":"7ba2878a32d1f50c","reportUrl":"../3754//#testresult/7ba2878a32d1f50c","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-c109nf9v/0","time":{"start":1760293667356,"stop":1760293667356,"duration":0}},{"uid":"fc5935395b340fea","reportUrl":"../3753//#testresult/fc5935395b340fea","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-fopmd8ep/0","time":{"start":1760250476784,"stop":1760250476784,"duration":0}},{"uid":"9d9f1936e6a968eb","reportUrl":"../3752//#testresult/9d9f1936e6a968eb","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-z8bmakgh/0","time":{"start":1760207187382,"stop":1760207187382,"duration":0}},{"uid":"fe99902cee8f5194","reportUrl":"../3751//#testresult/fe99902cee8f5194","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-i2x343pf/0","time":{"start":1760164126106,"stop":1760164126106,"duration":0}},{"uid":"4c142bf9613aa7a1","reportUrl":"../3748//#testresult/4c142bf9613aa7a1","status":"broken","statusDetails":"jubilant._juju.CLIError: Command '['juju', 'add-model', '--no-switch', 'jubilant-c3cd63d8', '--controller', 'microk8s']' returned non-zero exit status 1.\nStderr:\nERROR controller microk8s not found","time":{"start":1760130149966,"stop":1760130149966,"duration":0}},{"uid":"e1403245877b9ff9","reportUrl":"../3747//#testresult/e1403245877b9ff9","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-eeqrv1rw/0","time":{"start":1760077756806,"stop":1760077756806,"duration":0}},{"uid":"ecaeac042741d144","reportUrl":"../3745//#testresult/ecaeac042741d144","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-ejwdrhsp/0","time":{"start":1760066082342,"stop":1760066082342,"duration":0}},{"uid":"3c76f319a69d4b2","reportUrl":"../3744//#testresult/3c76f319a69d4b2","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-yrkaqh9k/0","time":{"start":1759991308192,"stop":1759991308192,"duration":0}},{"uid":"cd537451e97b99fc","reportUrl":"../3743//#testresult/cd537451e97b99fc","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-mucj7jan/0","time":{"start":1759948131988,"stop":1759948131988,"duration":0}},{"uid":"273882e957b0cf42","reportUrl":"../3740//#testresult/273882e957b0cf42","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-e5qa0c81/0","time":{"start":1759904847088,"stop":1759904847088,"duration":0}},{"uid":"ed465155070bbd9f","reportUrl":"../3738//#testresult/ed465155070bbd9f","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-n8psmvwb/0","time":{"start":1759861697137,"stop":1759861697137,"duration":0}},{"uid":"481886ff6d11decd","reportUrl":"../3732//#testresult/481886ff6d11decd","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-aluswo8l/0","time":{"start":1759818585889,"stop":1759818585889,"duration":0}},{"uid":"41151e96e40585b2","reportUrl":"../3725//#testresult/41151e96e40585b2","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-qjhdgmjb/0","time":{"start":1759732067188,"stop":1759732067188,"duration":0}}]},"tags":["asyncio","openstack"]},"source":"2df169c5d9d95bf8.json","parameterValues":[]}