{"uid":"d6a3dc60fc7dd4e3","name":"test_prometheus_metrics","fullName":"tests.integration.test_prometheus_metrics#test_prometheus_metrics","historyId":"8ad402f8a81c79aa3fa21a6fb8e0f79a","time":{"start":1760425269149,"stop":1760425770338,"duration":501189},"description":"\n    arrange: given a prometheus charm application.\n    act: when GitHub runner is integrated.\n    assert: the datasource is registered and basic metrics are available.\n    ","descriptionHtml":"<pre><code>arrange: given a prometheus charm application.\nact: when GitHub runner is integrated.\nassert: the datasource is registered and basic metrics are available.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1760423776081,"stop":1760423776081,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1760423776081,"stop":1760423776081,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1760423776081,"stop":1760423776081,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"k8s_juju","time":{"start":1760423776081,"stop":1760423776314,"duration":233},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"prometheus_app","time":{"start":1760423776314,"stop":1760423802408,"duration":26094},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"grafana_app","time":{"start":1760423802408,"stop":1760423877553,"duration":75145},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"traefik_ingress","time":{"start":1760423877553,"stop":1760423879186,"duration":1633},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1760423879186,"stop":1760423879737,"duration":551},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1760423879737,"stop":1760423879746,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"no_proxy","time":{"start":1760423879737,"stop":1760423879737,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"https_proxy","time":{"start":1760423879737,"stop":1760423879737,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"http_proxy","time":{"start":1760423879737,"stop":1760423879737,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1760423879746,"stop":1760423879772,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1760423879772,"stop":1760423879773,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1760423879772,"stop":1760423879772,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1760423879772,"stop":1760423879772,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1760423879772,"stop":1760423879772,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_clouds_yaml","time":{"start":1760423879772,"stop":1760423879772,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_no_proxy","time":{"start":1760423879773,"stop":1760423879773,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_clouds_yaml","time":{"start":1760423879773,"stop":1760423879773,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_config","time":{"start":1760423879773,"stop":1760423879773,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_https_proxy","time":{"start":1760423879773,"stop":1760423879773,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"path","time":{"start":1760423879773,"stop":1760423879773,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_http_proxy","time":{"start":1760423879773,"stop":1760423879773,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token","time":{"start":1760423879773,"stop":1760423879773,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1760423879774,"stop":1760423879774,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_model_proxy","time":{"start":1760423879774,"stop":1760423879781,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flavor_name","time":{"start":1760423879774,"stop":1760423879774,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_config","time":{"start":1760423879774,"stop":1760423879774,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"network_name","time":{"start":1760423879774,"stop":1760423879774,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clouds_yaml_contents","time":{"start":1760423879774,"stop":1760423879774,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1760423879782,"stop":1760423879798,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1760423879799,"stop":1760423881776,"duration":1977},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1760423881776,"stop":1760425259352,"duration":1377576},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_app_cos_agent","time":{"start":1760425259352,"stop":1760425265024,"duration":5672},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"grafana_password","time":{"start":1760425265024,"stop":1760425266738,"duration":1714},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_client","time":{"start":1760425266738,"stop":1760425266983,"duration":245},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_repository","time":{"start":1760425266984,"stop":1760425267557,"duration":573},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch","time":{"start":1760425267557,"stop":1760425269148,"duration":1591},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1760425269148,"stop":1760425269148,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1760425269148,"stop":1760425269149,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: given a prometheus charm application.\n    act: when GitHub runner is integrated.\n    assert: the datasource is registered and basic metrics are available.\n    ","status":"passed","steps":[],"attachments":[{"uid":"a1ccb097c4b5e1d9","name":"log","source":"a1ccb097c4b5e1d9.txt","type":"text/plain","size":70595}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1760425770338,"stop":1760425770339,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch::finalizer","time":{"start":1760425770339,"stop":1760425770805,"duration":466},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner::finalizer","time":{"start":1760425770806,"stop":1760425770806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1760425770807,"stop":1760425771217,"duration":410},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1760425771217,"stop":1760425771289,"duration":72},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::finalizer","time":{"start":1760425771292,"stop":1760425771293,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1760425771293,"stop":1760425771707,"duration":414},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1760425771708,"stop":1760425771708,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1760425771708,"stop":1760425771708,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1760425771708,"stop":1760425771708,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"k8s_juju::0","time":{"start":1760425771708,"stop":1760425771708,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"openstack"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_prometheus_metrics"},{"name":"host","value":"github-runner"},{"name":"thread","value":"27281-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_prometheus_metrics"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"369726bf316dc134","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":49,"skipped":0,"passed":80,"unknown":4,"total":133},"items":[{"uid":"1ed7b8d7b64a2240","reportUrl":"../3756//#testresult/1ed7b8d7b64a2240","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-i7pp0h1e/0","time":{"start":1760380108388,"stop":1760380108388,"duration":0}},{"uid":"7ba2878a32d1f50c","reportUrl":"../3754//#testresult/7ba2878a32d1f50c","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-c109nf9v/0","time":{"start":1760293667356,"stop":1760293667356,"duration":0}},{"uid":"fc5935395b340fea","reportUrl":"../3753//#testresult/fc5935395b340fea","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-fopmd8ep/0","time":{"start":1760250476784,"stop":1760250476784,"duration":0}},{"uid":"9d9f1936e6a968eb","reportUrl":"../3752//#testresult/9d9f1936e6a968eb","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-z8bmakgh/0","time":{"start":1760207187382,"stop":1760207187382,"duration":0}},{"uid":"fe99902cee8f5194","reportUrl":"../3751//#testresult/fe99902cee8f5194","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-i2x343pf/0","time":{"start":1760164126106,"stop":1760164126106,"duration":0}},{"uid":"4c142bf9613aa7a1","reportUrl":"../3748//#testresult/4c142bf9613aa7a1","status":"broken","statusDetails":"jubilant._juju.CLIError: Command '['juju', 'add-model', '--no-switch', 'jubilant-c3cd63d8', '--controller', 'microk8s']' returned non-zero exit status 1.\nStderr:\nERROR controller microk8s not found","time":{"start":1760130149966,"stop":1760130149966,"duration":0}},{"uid":"e1403245877b9ff9","reportUrl":"../3747//#testresult/e1403245877b9ff9","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-eeqrv1rw/0","time":{"start":1760077756806,"stop":1760077756806,"duration":0}},{"uid":"ecaeac042741d144","reportUrl":"../3745//#testresult/ecaeac042741d144","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-ejwdrhsp/0","time":{"start":1760066082342,"stop":1760066082342,"duration":0}},{"uid":"3c76f319a69d4b2","reportUrl":"../3744//#testresult/3c76f319a69d4b2","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-yrkaqh9k/0","time":{"start":1759991308192,"stop":1759991308192,"duration":0}},{"uid":"cd537451e97b99fc","reportUrl":"../3743//#testresult/cd537451e97b99fc","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-mucj7jan/0","time":{"start":1759948131988,"stop":1759948131988,"duration":0}},{"uid":"273882e957b0cf42","reportUrl":"../3740//#testresult/273882e957b0cf42","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-e5qa0c81/0","time":{"start":1759904847088,"stop":1759904847088,"duration":0}},{"uid":"ed465155070bbd9f","reportUrl":"../3738//#testresult/ed465155070bbd9f","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-n8psmvwb/0","time":{"start":1759861697137,"stop":1759861697137,"duration":0}},{"uid":"481886ff6d11decd","reportUrl":"../3732//#testresult/481886ff6d11decd","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-aluswo8l/0","time":{"start":1759818585889,"stop":1759818585889,"duration":0}},{"uid":"41151e96e40585b2","reportUrl":"../3725//#testresult/41151e96e40585b2","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-qjhdgmjb/0","time":{"start":1759732067188,"stop":1759732067188,"duration":0}},{"uid":"1bcd59c04421a41f","reportUrl":"../3723//#testresult/1bcd59c04421a41f","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-moectdbz/0","time":{"start":1759688837376,"stop":1759688837376,"duration":0}},{"uid":"4ec5b0de22655b33","reportUrl":"../3722//#testresult/4ec5b0de22655b33","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-j5sdmue1/0","time":{"start":1759645703043,"stop":1759645703043,"duration":0}},{"uid":"5766d7924322534a","reportUrl":"../3721//#testresult/5766d7924322534a","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-r7ievpqv/0","time":{"start":1759602391437,"stop":1759602391437,"duration":0}},{"uid":"32df20ef9c8df056","reportUrl":"../3719//#testresult/32df20ef9c8df056","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-d4dj9wvp/0","time":{"start":1759559281348,"stop":1759559281348,"duration":0}},{"uid":"69306af8056a0f11","reportUrl":"../3718//#testresult/69306af8056a0f11","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: github-runner-image-builder-uhb6osuq/0","time":{"start":1759516166360,"stop":1759516166360,"duration":0}},{"uid":"7067d15de6114705","reportUrl":"../3708//#testresult/7067d15de6114705","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\n  test-n4kdx9za/0 [idle] waiting: Waiting for image over integration.\n  github-runner-image-builder-n4kdx9za/0 [executing] active: Building image.","time":{"start":1759305559136,"stop":1759305559136,"duration":0}}]},"tags":["asyncio","openstack"]},"source":"d6a3dc60fc7dd4e3.json","parameterValues":[]}