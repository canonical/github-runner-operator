06:23:35 WARNING unexpected facade SSHServer received from the controller
06:23:35 INFO Adding model github-pr-c3380-lxd:test-charm-fork-path-change-195n on cloud localhost
06:23:36 WARNING unexpected facade SSHServer received from the controller
06:23:36 WARNING unexpected facade SSHSession received from the controller
06:23:36 WARNING unexpected facade SSHTunneler received from the controller
06:23:37 INFO Deploying ch:amd64/jammy/github-runner-image-builder-84
06:24:01 INFO Deploying local:jammy/github-runner-0
06:24:01 INFO Waiting for model:
  test-dr4z8fxu/0 [allocating] waiting: waiting for machine
  github-runner-image-builder-dr4z8fxu/0 [allocating] waiting: waiting for machine
06:24:31 INFO Waiting for model:
  test-dr4z8fxu/0 [allocating] waiting: waiting for machine
  github-runner-image-builder-dr4z8fxu/0 [allocating] waiting: waiting for machine
06:25:01 INFO Waiting for model:
  test-dr4z8fxu/0 [allocating] waiting: waiting for machine
  github-runner-image-builder-dr4z8fxu/0 [allocating] waiting: agent initialising
06:25:31 INFO Waiting for model:
  test-dr4z8fxu/0 [executing] maintenance: installing charm software
  github-runner-image-builder-dr4z8fxu/0 [executing] maintenance: Setting up Builder.
06:26:02 INFO Waiting for model:
  test-dr4z8fxu/0 [executing] maintenance: installing charm software
  github-runner-image-builder-dr4z8fxu/0 [executing] maintenance: Setting up Builder.
06:26:32 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] blocked: Please provide image integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] maintenance: Setting up Builder.
06:27:02 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] blocked: Please provide image integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] maintenance: Setting up Builder.
06:27:32 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] blocked: Please provide image integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] maintenance: Setting up Builder.
06:28:03 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:28:33 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:29:04 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:29:34 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:30:04 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:30:35 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:31:05 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:31:36 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:32:06 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:32:36 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:33:07 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:33:37 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:34:07 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:34:37 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:35:08 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:35:38 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:36:08 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:36:38 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:37:08 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:37:39 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:38:09 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] waiting: Waiting for image over integration.
  github-runner-image-builder-dr4z8fxu/0 [executing] active: Building image.
06:38:40 INFO Waiting for model:
  test-dr4z8fxu/0 [executing] maintenance: Reconciling runners
  github-runner-image-builder-dr4z8fxu/0 [idle] active: 
06:39:01 INFO GitHub token rate limit: Rate(reset=2025-06-08 07:28:32+00:00, remaining=4777, limit=5000)
06:39:12 INFO test_path_config_change
06:39:12 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] active: 
06:39:43 INFO Waiting for model:
  test-dr4z8fxu/0 [executing] maintenance: Reconciling runners
06:40:13 INFO Waiting for model:
  test-dr4z8fxu/0 [idle] active: 
06:40:23 INFO Ensure there is a runner (this calls reconcile)
06:42:26 INFO Waiting for model:
  test-dr4z8fxu/0 [executing] active: 
06:42:56 INFO Reconciling (again)
06:50:51 INFO Waiting for model:
  test-dr4z8fxu/0 [executing] active: 
06:51:20 INFO runners: ['test-dr4z8fxu-0-n-8aa73632769d']
06:51:20 INFO runners in github repo: [SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-3-n-0e2a5c081167"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-3-n-1b09eeb7d46d"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-3-n-81b33e75910f"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-3-n-88d342c27082"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-3-n-9d9142109350"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-3-n-d7e812b6493b"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps6-3-n-de7a7d339ba0"), SelfHostedActionsRunner(name="os-amd-jammy-staging-ps7-0-n-fd70374de652"), SelfHostedActionsRunner(name="test-azshxiri-0-n-648ecf10c847"), SelfHostedActionsRunner(name="test-clnnzuzt-0-n-ef3ae1893a31"), SelfHostedActionsRunner(name="test-d4ce6lj2-0-n-d12fe9fca865"), SelfHostedActionsRunner(name="test-dr4z8fxu-0-n-8aa73632769d"), SelfHostedActionsRunner(name="test-dved1kww-0-n-cd1afedb35aa"), SelfHostedActionsRunner(name="test-dved1kww-0-n-fc33527b3ac4"), SelfHostedActionsRunner(name="test-h2696b2f-0-n-4239f365450d"), SelfHostedActionsRunner(name="test-i0y8s3hp-0-n-2b47ac036d72"), SelfHostedActionsRunner(name="test-iz4b8lr3-0-n-3e3f3412e30d"), SelfHostedActionsRunner(name="test-jiz9feti-0-n-c4e13c026c55"), SelfHostedActionsRunner(name="test-k2xsx24w-0-r-3e1b4f475b85"), SelfHostedActionsRunner(name="test-kmpq19th-0-n-ab0f9b3dfd87"), SelfHostedActionsRunner(name="test-mfxzdfc5-0-n-d7470cd1702e"), SelfHostedActionsRunner(name="test-mpnjs7bx-0-n-239f96d7e7d7"), SelfHostedActionsRunner(name="test-r4tv4lfy-0-n-c3246f4fa80c"), SelfHostedActionsRunner(name="test-rwkhq1bc-0-n-caea25819134"), SelfHostedActionsRunner(name="test-ry2bf8nf-0-n-a733ef742172"), SelfHostedActionsRunner(name="test-ryle0re8-0-n-58e47d3c4dd6"), SelfHostedActionsRunner(name="test-yo77kv9r-0-n-a66667b1fd9e"), SelfHostedActionsRunner(name="test-ytcvk039-0-n-25e6948c8365")]
06:51:22 INFO Model status:

Model                             Controller           Cloud/Region         Version  SLA          Timestamp
test-charm-fork-path-change-195n  github-pr-c3380-lxd  localhost/localhost  3.6.6    unsupported  06:51:22Z

App                                   Version  Status  Scale  Charm                        Channel      Rev  Exposed  Message
github-runner-image-builder-dr4z8fxu           active      1  github-runner-image-builder  latest/edge   84  no       
test-dr4z8fxu                                  active      1  github-runner                               0  no       

Unit                                     Workload  Agent  Machine  Public address  Ports  Message
github-runner-image-builder-dr4z8fxu/0*  active    idle   0        10.205.120.44          
test-dr4z8fxu/0*                         active    idle   1        10.205.120.75          

Machine  State    Address        Inst id        Base          AZ  Message
0        started  10.205.120.44  juju-f6c08d-0  ubuntu@22.04      Running
1        started  10.205.120.75  juju-f6c08d-1  ubuntu@22.04      Running

06:51:22 INFO Juju error logs:

machine-0: 06:24:54 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 06:24:54 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-github-runner-image-builder-dr4z8fxu-0: 06:24:54 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-1: 06:25:03 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 06:25:03 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-test-dr4z8fxu-0: 06:25:03 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-github-runner-image-builder-dr4z8fxu-0: 06:25:38 ERROR unit.github-runner-image-builder-dr4z8fxu/0.juju-log Pipx command failed, code: 1, out: None, err: None
unit-test-dr4z8fxu-0: 06:43:25 ERROR unit.test-dr4z8fxu/0.juju-log Failed to get SSH connection while removing test-dr4z8fxu-0-n-f598995afe1d
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/github_runner_manager/openstack_cloud/openstack_runner_manager.py", line 216, in _delete_runner
    ssh_conn = self._openstack_cloud.get_ssh_connection(instance)
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 144, in exception_handling_wrapper
    return func(*args, **kwargs)
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 340, in get_ssh_connection
    raise KeyfileError(
github_runner_manager.errors.KeyfileError: Missing keyfile for server: test-dr4z8fxu-0-n-f598995afe1d, key path: /home/runner-manager/.ssh/test-dr4z8fxu-0-n-f598995afe1d.key
unit-test-dr4z8fxu-0: 06:43:26 ERROR unit.test-dr4z8fxu/0.juju-log Invalid pulled metrics. No runner_installed information for test-dr4z8fxu-0-n-f598995afe1d.
unit-test-dr4z8fxu-0: 06:43:26 ERROR unit.test-dr4z8fxu/0.juju-log No metrics returned after deleting test-dr4z8fxu-0-n-f598995afe1d
unit-test-dr4z8fxu-0: 06:43:33 ERROR unit.test-dr4z8fxu/0.juju-log No metrics returned after deleting test-dr4z8fxu-0-n-f598995afe1d
unit-test-dr4z8fxu-0: 06:48:40 ERROR unit.test-dr4z8fxu/0.juju-log Timeout creating openstack server test-dr4z8fxu-0-n-0bca0622a2c2
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 245, in launch_instance
    server = conn.create_server(
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/decorator.py", line 235, in fun
    return caller(func, *(extras + args), **kw)
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/openstack/cloud/_utils.py", line 233, in func_wrapper
    return func(*args, **kwargs)
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/openstack/cloud/_compute.py", line 1104, in create_server
    server = self.wait_for_server(
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/openstack/cloud/_compute.py", line 1243, in wait_for_server
    for count in utils.iterate_timeout(
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/openstack/utils.py", line 88, in iterate_timeout
    raise exceptions.ResourceTimeout(message)
openstack.exceptions.ResourceTimeout: Timeout waiting for the server to come up.
unit-test-dr4z8fxu-0: 06:48:41 ERROR unit.test-dr4z8fxu/0.juju-log Failed to spawn a runner.
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 245, in launch_instance
    server = conn.create_server(
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/decorator.py", line 235, in fun
    return caller(func, *(extras + args), **kw)
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/openstack/cloud/_utils.py", line 233, in func_wrapper
    return func(*args, **kwargs)
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/openstack/cloud/_compute.py", line 1104, in create_server
    server = self.wait_for_server(
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/openstack/cloud/_compute.py", line 1243, in wait_for_server
    for count in utils.iterate_timeout(
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/openstack/utils.py", line 88, in iterate_timeout
    raise exceptions.ResourceTimeout(message)
openstack.exceptions.ResourceTimeout: Timeout waiting for the server to come up.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/github_runner_manager/openstack_cloud/openstack_runner_manager.py", line 140, in create_runner
    instance = self._openstack_cloud.launch_instance(
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 144, in exception_handling_wrapper
    return func(*args, **kwargs)
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/github_runner_manager/openstack_cloud/openstack_cloud.py", line 265, in launch_instance
    raise OpenStackError(f"Timeout creating openstack server {instance_id}") from err
github_runner_manager.errors.OpenStackError: Timeout creating openstack server test-dr4z8fxu-0-n-0bca0622a2c2

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/github_runner_manager/manager/runner_manager.py", line 391, in _spawn_runners
    return (RunnerManager._create_runner(create_runner_args_sequence[0]),)
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/github_runner_manager/manager/runner_manager.py", line 521, in _create_runner
    args.cloud_runner_manager.create_runner(
  File "/var/lib/juju/agents/unit-test-dr4z8fxu-0/charm/venv/github_runner_manager/openstack_cloud/openstack_runner_manager.py", line 147, in create_runner
    raise RunnerCreateError(
github_runner_manager.errors.RunnerCreateError: Failed to create RunnerIdentity(instance_id=InstanceID('test-dr4z8fxu-0-n-0bca0622a2c2'), metadata=RunnerMetadata(platform_name='github', runner_id='108425', url=None)) openstack runner

06:51:22 INFO Forgetting model main...