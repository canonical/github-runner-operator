{"uid":"fb4dcdd82a88e7b0","name":"test_jobmanager_reactive","fullName":"tests.integration.jobmanager.test_jobmanager_reactive#test_jobmanager_reactive","historyId":"bcfc000091d2ee52821e468a61bfae99","time":{"start":1758697359473,"stop":1758698188274,"duration":828801},"description":"\n    Test reactive mode together with jobmanager.\n\n    Test that after putting a job in the queue that the runner is registered and the\n    job is picked up.\n\n    So,\n    1. Put job in the queue\n    2. Wait for runner to be registered\n    3. Wait for reactive process to ask for job status\n    4. Mark job deletable\n    5. Reconcile\n    6. Assert queue is empty\n    ","descriptionHtml":"<pre><code>Test reactive mode together with jobmanager.\n\nTest that after putting a job in the queue that the runner is registered and the\njob is picked up.\n\nSo,\n1. Put job in the queue\n2. Wait for runner to be registered\n3. Wait for reactive process to ask for job status\n4. Mark job deletable\n5. Reconcile\n6. Assert queue is empty\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1758695218224,"stop":1758695218225,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_ip_address","time":{"start":1758695218225,"stop":1758695218226,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_listen_address","time":{"start":1758695218226,"stop":1758695218226,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_token","time":{"start":1758695218226,"stop":1758695218226,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1758695218226,"stop":1758695218226,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_listen_port","time":{"start":1758695218226,"stop":1758695218226,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_base_url","time":{"start":1758695218226,"stop":1758695218226,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_httpserver","time":{"start":1758695218227,"stop":1758695218318,"duration":91},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_ssl_context","time":{"start":1758695218227,"stop":1758695218227,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1758695218319,"stop":1758695219118,"duration":799},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1758695218319,"stop":1758695218319,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"https_proxy","time":{"start":1758695219119,"stop":1758695219119,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"no_proxy","time":{"start":1758695219119,"stop":1758695219119,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"http_proxy","time":{"start":1758695219119,"stop":1758695219119,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1758695219119,"stop":1758695219131,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1758695219131,"stop":1758695219163,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mongodb","time":{"start":1758695219163,"stop":1758695221297,"duration":2134},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1758695219163,"stop":1758695219163,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_app","time":{"start":1758695221297,"stop":1758696497377,"duration":1276080},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1758695221298,"stop":1758695221298,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1758695221298,"stop":1758695221298,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_clouds_yaml","time":{"start":1758695221298,"stop":1758695221298,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1758695221298,"stop":1758695221298,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_https_proxy","time":{"start":1758695221299,"stop":1758695221299,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_http_proxy","time":{"start":1758695221299,"stop":1758695221299,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token","time":{"start":1758695221299,"stop":1758695221299,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_config","time":{"start":1758695221299,"stop":1758695221299,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_no_proxy","time":{"start":1758695221299,"stop":1758695221299,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"path","time":{"start":1758695221299,"stop":1758695221299,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_clouds_yaml","time":{"start":1758695221299,"stop":1758695221300,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_config","time":{"start":1758695221300,"stop":1758695221301,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"network_name","time":{"start":1758695221300,"stop":1758695221300,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clouds_yaml_contents","time":{"start":1758695221300,"stop":1758695221300,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1758695221300,"stop":1758695221300,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flavor_name","time":{"start":1758695221300,"stop":1758695221300,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_model_proxy","time":{"start":1758695221301,"stop":1758695221318,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1758695221318,"stop":1758695221354,"duration":36},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1758695221354,"stop":1758695223955,"duration":2601},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1758695223955,"stop":1758696497377,"duration":1273422},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_no_runner","time":{"start":1758696497378,"stop":1758696512856,"duration":15478},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1758696512856,"stop":1758696512856,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver","time":{"start":1758696512857,"stop":1758696512857,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1758696512857,"stop":1758696512857,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app","time":{"start":1758696512857,"stop":1758696675599,"duration":162742},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_for_reactive","time":{"start":1758696675599,"stop":1758697359472,"duration":683873},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Test reactive mode together with jobmanager.\n\n    Test that after putting a job in the queue that the runner is registered and the\n    job is picked up.\n\n    So,\n    1. Put job in the queue\n    2. Wait for runner to be registered\n    3. Wait for reactive process to ask for job status\n    4. Mark job deletable\n    5. Reconcile\n    6. Assert queue is empty\n    ","status":"passed","steps":[],"attachments":[{"uid":"5fa0d0404c4c2207","name":"log","source":"5fa0d0404c4c2207.txt","type":"text/plain","size":45782}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"app_for_reactive::finalizer","time":{"start":1758698188275,"stop":1758698344551,"duration":156276},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app::finalizer","time":{"start":1758698344555,"stop":1758698482802,"duration":138247},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1758698482804,"stop":1758698482804,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_no_runner::finalizer","time":{"start":1758698482805,"stop":1758698482805,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner::finalizer","time":{"start":1758698482806,"stop":1758698482806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1758698482807,"stop":1758698483026,"duration":219},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1758698483027,"stop":1758698483128,"duration":101},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::finalizer","time":{"start":1758698483135,"stop":1758698483135,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1758698483137,"stop":1758698483953,"duration":816},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1758698483954,"stop":1758698483954,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1758698483954,"stop":1758698483954,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1758698483954,"stop":1758698483954,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_httpserver::0","time":{"start":1758698483956,"stop":1758698484095,"duration":139},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"openstack"},{"name":"parentSuite","value":"tests.integration.jobmanager"},{"name":"suite","value":"test_jobmanager_reactive"},{"name":"host","value":"github-runner"},{"name":"thread","value":"16000-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.jobmanager.test_jobmanager_reactive"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f0a5535aa562e27f","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":19,"skipped":0,"passed":77,"unknown":3,"total":99},"items":[{"uid":"71116e2ad409022d","reportUrl":"../3647//#testresult/71116e2ad409022d","status":"passed","time":{"start":1758654157013,"stop":1758654987088,"duration":830075}},{"uid":"82cccf98c03d07a9","reportUrl":"../3643//#testresult/82cccf98c03d07a9","status":"passed","time":{"start":1758611090820,"stop":1758611981583,"duration":890763}},{"uid":"cad683c34fe178ad","reportUrl":"../3640//#testresult/cad683c34fe178ad","status":"passed","time":{"start":1758567723548,"stop":1758568553181,"duration":829633}},{"uid":"5eba52af1ff9b2b","reportUrl":"../3635//#testresult/5eba52af1ff9b2b","status":"passed","time":{"start":1758524582629,"stop":1758525411502,"duration":828873}},{"uid":"7c854bb8049b0495","reportUrl":"../3634//#testresult/7c854bb8049b0495","status":"passed","time":{"start":1758481221413,"stop":1758482049640,"duration":828227}},{"uid":"41387dee35f56bae","reportUrl":"../3633//#testresult/41387dee35f56bae","status":"passed","time":{"start":1758437938266,"stop":1758438767056,"duration":828790}},{"uid":"fd16a56d3dc46e21","reportUrl":"../3632//#testresult/fd16a56d3dc46e21","status":"passed","time":{"start":1758394988060,"stop":1758395817514,"duration":829454}},{"uid":"be09a27d352dfc9d","reportUrl":"../3631//#testresult/be09a27d352dfc9d","status":"passed","time":{"start":1758351814184,"stop":1758352644867,"duration":830683}},{"uid":"2ad0c405739792b2","reportUrl":"../3630//#testresult/2ad0c405739792b2","status":"passed","time":{"start":1758308490437,"stop":1758309323683,"duration":833246}},{"uid":"8203a85dcea2f461","reportUrl":"../3629//#testresult/8203a85dcea2f461","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\n  test-soxsn8mh/0 [idle] waiting: Waiting for image over integration.\n  github-runner-image-builder-soxsn8mh/0 [executing] active: Building image.","time":{"start":1758263373546,"stop":1758263373546,"duration":0}},{"uid":"ca28fe17accd4fa8","reportUrl":"../3626//#testresult/ca28fe17accd4fa8","status":"passed","time":{"start":1758222008595,"stop":1758222838018,"duration":829423}},{"uid":"227350fb7242e397","reportUrl":"../3625//#testresult/227350fb7242e397","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\n  test-zsy6mc1u/0 [idle] waiting: Waiting for image over integration.\n  github-runner-image-builder-zsy6mc1u/0 [executing] active: Building image.","time":{"start":1758176849509,"stop":1758176849509,"duration":0}},{"uid":"a05d008400eb6ec5","reportUrl":"../3624//#testresult/a05d008400eb6ec5","status":"passed","time":{"start":1758135903351,"stop":1758136733145,"duration":829794}},{"uid":"95b748d24c96e08d","reportUrl":"../3603//#testresult/95b748d24c96e08d","status":"passed","time":{"start":1758092548706,"stop":1758093377577,"duration":828871}},{"uid":"81f4d458308977b4","reportUrl":"../3598//#testresult/81f4d458308977b4","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: test-srfo4o8h/0","time":{"start":1758047875386,"stop":1758047875386,"duration":0}},{"uid":"eecd1f739afbdba4","reportUrl":"../3594//#testresult/eecd1f739afbdba4","status":"passed","time":{"start":1757919611666,"stop":1757920441495,"duration":829829}},{"uid":"9c4deaa09e0bea5a","reportUrl":"../3588//#testresult/9c4deaa09e0bea5a","status":"passed","time":{"start":1757876152054,"stop":1757876979277,"duration":827223}},{"uid":"1274620b6ff2086f","reportUrl":"../3587//#testresult/1274620b6ff2086f","status":"passed","time":{"start":1757833190945,"stop":1757834019534,"duration":828589}},{"uid":"3025e53275081658","reportUrl":"../3586//#testresult/3025e53275081658","status":"passed","time":{"start":1757790036248,"stop":1757790865684,"duration":829436}},{"uid":"e6d7b2d39468dc1","reportUrl":"../3584//#testresult/e6d7b2d39468dc1","status":"passed","time":{"start":1757747081625,"stop":1757747911265,"duration":829640}}]},"tags":["asyncio","abort_on_fail","openstack"]},"source":"fb4dcdd82a88e7b0.json","parameterValues":[]}