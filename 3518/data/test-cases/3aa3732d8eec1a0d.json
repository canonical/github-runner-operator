{"uid":"3aa3732d8eec1a0d","name":"test_jobmanager_reactive","fullName":"tests.integration.jobmanager.test_jobmanager_reactive#test_jobmanager_reactive","historyId":"bcfc000091d2ee52821e468a61bfae99","time":{"start":1756753127991,"stop":1756753956438,"duration":828447},"description":"\n    Test reactive mode together with jobmanager.\n\n    Test that after putting a job in the queue that the runner is registered and the\n    job is picked up.\n\n    So,\n    1. Put job in the queue\n    2. Wait for runner to be registered\n    3. Wait for reactive process to ask for job status\n    4. Mark job deletable\n    5. Reconcile\n    6. Assert queue is empty\n    ","descriptionHtml":"<pre><code>Test reactive mode together with jobmanager.\n\nTest that after putting a job in the queue that the runner is registered and the\njob is picked up.\n\nSo,\n1. Put job in the queue\n2. Wait for runner to be registered\n3. Wait for reactive process to ask for job status\n4. Mark job deletable\n5. Reconcile\n6. Assert queue is empty\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1756751074999,"stop":1756751074999,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_token","time":{"start":1756751075000,"stop":1756751075000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_ip_address","time":{"start":1756751075000,"stop":1756751075000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"jobmanager_base_url","time":{"start":1756751075000,"stop":1756751075000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_listen_port","time":{"start":1756751075000,"stop":1756751075000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_httpserver","time":{"start":1756751075001,"stop":1756751075013,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_ssl_context","time":{"start":1756751075001,"stop":1756751075001,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1756751075001,"stop":1756751075001,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver_listen_address","time":{"start":1756751075001,"stop":1756751075001,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1756751075014,"stop":1756751075554,"duration":540},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1756751075014,"stop":1756751075014,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1756751075555,"stop":1756751075566,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"no_proxy","time":{"start":1756751075555,"stop":1756751075555,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"http_proxy","time":{"start":1756751075555,"stop":1756751075555,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"https_proxy","time":{"start":1756751075555,"stop":1756751075555,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1756751075567,"stop":1756751075596,"duration":29},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1756751075596,"stop":1756751075596,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mongodb","time":{"start":1756751075596,"stop":1756751077525,"duration":1929},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_clouds_yaml","time":{"start":1756751077525,"stop":1756751077525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_app","time":{"start":1756751077525,"stop":1756752278884,"duration":1201359},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1756751077525,"stop":1756751077526,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1756751077525,"stop":1756751077525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_config","time":{"start":1756751077526,"stop":1756751077526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"token","time":{"start":1756751077526,"stop":1756751077526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_https_proxy","time":{"start":1756751077526,"stop":1756751077526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_no_proxy","time":{"start":1756751077526,"stop":1756751077526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_http_proxy","time":{"start":1756751077526,"stop":1756751077526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"path","time":{"start":1756751077526,"stop":1756751077526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1756751077526,"stop":1756751077526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"private_endpoint_clouds_yaml","time":{"start":1756751077526,"stop":1756751077527,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"network_name","time":{"start":1756751077527,"stop":1756751077527,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clouds_yaml_contents","time":{"start":1756751077527,"stop":1756751077527,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1756751077527,"stop":1756751077527,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_model_proxy","time":{"start":1756751077527,"stop":1756751077537,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_config","time":{"start":1756751077527,"stop":1756751077527,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flavor_name","time":{"start":1756751077527,"stop":1756751077527,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1756751077538,"stop":1756751077555,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1756751077556,"stop":1756751079281,"duration":1725},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1756751079281,"stop":1756752278884,"duration":1199603},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_no_runner","time":{"start":1756752278884,"stop":1756752294185,"duration":15301},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1756752294185,"stop":1756752294185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"httpserver","time":{"start":1756752294186,"stop":1756752294186,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1756752294186,"stop":1756752294186,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app","time":{"start":1756752294186,"stop":1756752455209,"duration":161023},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_for_reactive","time":{"start":1756752455209,"stop":1756753127990,"duration":672781},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Test reactive mode together with jobmanager.\n\n    Test that after putting a job in the queue that the runner is registered and the\n    job is picked up.\n\n    So,\n    1. Put job in the queue\n    2. Wait for runner to be registered\n    3. Wait for reactive process to ask for job status\n    4. Mark job deletable\n    5. Reconcile\n    6. Assert queue is empty\n    ","status":"passed","steps":[],"attachments":[{"uid":"2a21ec0f852ba32c","name":"log","source":"2a21ec0f852ba32c.txt","type":"text/plain","size":45299}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"app_for_reactive::finalizer","time":{"start":1756753956439,"stop":1756754112309,"duration":155870},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app::finalizer","time":{"start":1756754112310,"stop":1756754250653,"duration":138343},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_no_runner::finalizer","time":{"start":1756754250655,"stop":1756754250655,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1756754250655,"stop":1756754250655,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner::finalizer","time":{"start":1756754250656,"stop":1756754250656,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1756754250656,"stop":1756754250829,"duration":173},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1756754250830,"stop":1756754250933,"duration":103},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::finalizer","time":{"start":1756754250939,"stop":1756754250939,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1756754250940,"stop":1756754251362,"duration":422},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1756754251363,"stop":1756754251363,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1756754251363,"stop":1756754251363,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1756754251363,"stop":1756754251363,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_httpserver::0","time":{"start":1756754251365,"stop":1756754251745,"duration":380},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"openstack"},{"name":"parentSuite","value":"tests.integration.jobmanager"},{"name":"suite","value":"test_jobmanager_reactive"},{"name":"host","value":"github-runner"},{"name":"thread","value":"12251-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.jobmanager.test_jobmanager_reactive"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"bbde2809a4252bfc","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":12,"skipped":0,"passed":48,"unknown":2,"total":62},"items":[{"uid":"23d31af5d847a0d4","reportUrl":"../3515//#testresult/23d31af5d847a0d4","status":"passed","time":{"start":1756713565202,"stop":1756714393343,"duration":828141}},{"uid":"241326257b5a8339","reportUrl":"../3512//#testresult/241326257b5a8339","status":"passed","time":{"start":1756666644835,"stop":1756667472767,"duration":827932}},{"uid":"1294c93d4d3f378a","reportUrl":"../3511//#testresult/1294c93d4d3f378a","status":"passed","time":{"start":1756623498500,"stop":1756624326924,"duration":828424}},{"uid":"2e2df9e8e778077d","reportUrl":"../3510//#testresult/2e2df9e8e778077d","status":"passed","time":{"start":1756580258063,"stop":1756581085746,"duration":827683}},{"uid":"c4fee7dcff37ecc","reportUrl":"../3509//#testresult/c4fee7dcff37ecc","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\n  test-nu1m5l6k/0 [idle] waiting: Waiting for image over integration.\n  github-runner-image-builder-nu1m5l6k/0 [executing] active: Building image.","time":{"start":1756536922141,"stop":1756536922141,"duration":0}},{"uid":"d26391a04a0dec27","reportUrl":"../3508//#testresult/d26391a04a0dec27","status":"passed","time":{"start":1756494205529,"stop":1756495036690,"duration":831161}},{"uid":"8d0f75fe50ed0ccf","reportUrl":"../3504//#testresult/8d0f75fe50ed0ccf","status":"passed","time":{"start":1756407514202,"stop":1756408342614,"duration":828412}},{"uid":"84bd8d88285033c6","reportUrl":"../3502//#testresult/84bd8d88285033c6","status":"passed","time":{"start":1756364315264,"stop":1756365144494,"duration":829230}},{"uid":"49a569ba8c0a4e5e","reportUrl":"../3501//#testresult/49a569ba8c0a4e5e","status":"passed","time":{"start":1756321093261,"stop":1756321921422,"duration":828161}},{"uid":"fe9779c636026b56","reportUrl":"../3488//#testresult/fe9779c636026b56","status":"passed","time":{"start":1756277894236,"stop":1756278721450,"duration":827214}},{"uid":"86b425f46dc9d53e","reportUrl":"../3468//#testresult/86b425f46dc9d53e","status":"passed","time":{"start":1756192499784,"stop":1756193327339,"duration":827555}},{"uid":"c35cc89e55557f2","reportUrl":"../3463//#testresult/c35cc89e55557f2","status":"passed","time":{"start":1756148339360,"stop":1756149168989,"duration":829629}},{"uid":"60bb1efa5170f5de","reportUrl":"../3451//#testresult/60bb1efa5170f5de","status":"passed","time":{"start":1756105221383,"stop":1756106050629,"duration":829246}},{"uid":"cba5d6a2863bc718","reportUrl":"../3448//#testresult/cba5d6a2863bc718","status":"passed","time":{"start":1756061967850,"stop":1756062795978,"duration":828128}},{"uid":"1a8470f3cb983d45","reportUrl":"../3447//#testresult/1a8470f3cb983d45","status":"passed","time":{"start":1756018664709,"stop":1756019492779,"duration":828070}},{"uid":"c69a6e2b29c112c7","reportUrl":"../3446//#testresult/c69a6e2b29c112c7","status":"passed","time":{"start":1755975608036,"stop":1755976436626,"duration":828590}},{"uid":"e0dbcbc2b9ee9b72","reportUrl":"../3445//#testresult/e0dbcbc2b9ee9b72","status":"passed","time":{"start":1755932322959,"stop":1755933152917,"duration":829958}},{"uid":"69cb65988e447c42","reportUrl":"../3444//#testresult/69cb65988e447c42","status":"passed","time":{"start":1755889142645,"stop":1755889970619,"duration":827974}},{"uid":"6e6f4543687ce823","reportUrl":"../3437//#testresult/6e6f4543687ce823","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\n  test-iugzsk6v/0 [idle] waiting: Waiting for image over integration.\n  github-runner-image-builder-iugzsk6v/0 [executing] active: Building image.","time":{"start":1755844667795,"stop":1755844667795,"duration":0}},{"uid":"27e91dc73edec641","reportUrl":"../3430//#testresult/27e91dc73edec641","status":"passed","time":{"start":1755802694422,"stop":1755803523334,"duration":828912}}]},"tags":["asyncio","abort_on_fail","openstack"]},"source":"3aa3732d8eec1a0d.json","parameterValues":[]}