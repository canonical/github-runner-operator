{"uid":"45e38602566194bb","name":"test_ssh_debug","fullName":"tests.integration.test_debug_ssh#test_ssh_debug","historyId":"4f16d0ceae44b92b8c4e82e7e2774aa1","time":{"start":1765261527071,"stop":1765262088817,"duration":561746},"description":"\n    arrange: given an integrated GitHub-Runner charm and tmate-ssh-server charm.\n    act: when canonical/action-tmate is triggered.\n    assert: the ssh connection info from action-log and tmate-ssh-server matches.\n    ","descriptionHtml":"<pre><code>arrange: given an integrated GitHub-Runner charm and tmate-ssh-server charm.\nact: when canonical/action-tmate is triggered.\nassert: the ssh connection info from action-log and tmate-ssh-server matches.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"pytestconfig","time":{"start":1765261149543,"stop":1765261149543,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1765261149543,"stop":1765261149543,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1765261149543,"stop":1765261149543,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1765261149543,"stop":1765261149898,"duration":355},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1765261149899,"stop":1765261149905,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"proxy_config","time":{"start":1765261149899,"stop":1765261149899,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1765261149905,"stop":1765261149905,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1765261149906,"stop":1765261149906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_config","time":{"start":1765261149906,"stop":1765261149906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_config","time":{"start":1765261149906,"stop":1765261149906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1765261149906,"stop":1765261149906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1765261149906,"stop":1765261149917,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_config","time":{"start":1765261149906,"stop":1765261149906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1765261149906,"stop":1765261149906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1765261149906,"stop":1765261149906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1765261149917,"stop":1765261152982,"duration":3065},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1765261152983,"stop":1765261358868,"duration":205885},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dockerhub_mirror","time":{"start":1765261152983,"stop":1765261152983,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmate_ssh_server_app","time":{"start":1765261358868,"stop":1765261360365,"duration":1497},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_no_wait_tmate","time":{"start":1765261360365,"stop":1765261524599,"duration":164234},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_client","time":{"start":1765261524599,"stop":1765261524841,"duration":242},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_repository","time":{"start":1765261524841,"stop":1765261525395,"duration":554},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch","time":{"start":1765261525395,"stop":1765261527044,"duration":1649},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmate_ssh_server_unit_ip","time":{"start":1765261527044,"stop":1765261527070,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1765261527071,"stop":1765261527071,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1765261527071,"stop":1765261527071,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: given an integrated GitHub-Runner charm and tmate-ssh-server charm.\n    act: when canonical/action-tmate is triggered.\n    assert: the ssh connection info from action-log and tmate-ssh-server matches.\n    ","status":"passed","steps":[],"attachments":[{"uid":"de23501031727541","name":"log","source":"de23501031727541.txt","type":"text/plain","size":29645}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1765262088818,"stop":1765262088818,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch::finalizer","time":{"start":1765262088818,"stop":1765262089186,"duration":368},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1765262089187,"stop":1765262089188,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner::finalizer","time":{"start":1765262089187,"stop":1765262089187,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1765262089188,"stop":1765262089861,"duration":673},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1765262089863,"stop":1765262090199,"duration":336},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1765262090199,"stop":1765262090199,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1765262090199,"stop":1765262090199,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1765262090200,"stop":1765262090200,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"asyncio"},{"name":"tag","value":"openstack"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_debug_ssh"},{"name":"host","value":"github-runner"},{"name":"thread","value":"10623-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_debug_ssh"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"dc6c687e5e65d019","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":57,"broken":122,"skipped":0,"passed":201,"unknown":18,"total":398},"items":[{"uid":"bf0d7bebcdd554a1","reportUrl":"../4256//#testresult/bf0d7bebcdd554a1","status":"passed","time":{"start":1765241041603,"stop":1765241599643,"duration":558040}},{"uid":"b0e9ed5208a5286f","reportUrl":"../4253//#testresult/b0e9ed5208a5286f","status":"passed","time":{"start":1765175147678,"stop":1765175638907,"duration":491229}},{"uid":"c8a415eef1f88d15","reportUrl":"../4251//#testresult/c8a415eef1f88d15","status":"passed","time":{"start":1765131900506,"stop":1765132450642,"duration":550136}},{"uid":"497ba6fb336a1f04","reportUrl":"../4250//#testresult/497ba6fb336a1f04","status":"passed","time":{"start":1765088662347,"stop":1765089154089,"duration":491742}},{"uid":"3ea7f915f597e4a","reportUrl":"../4249//#testresult/3ea7f915f597e4a","status":"passed","time":{"start":1765045439579,"stop":1765045931019,"duration":491440}},{"uid":"b5ed692b445b4241","reportUrl":"../4235//#testresult/b5ed692b445b4241","status":"passed","time":{"start":1765002209819,"stop":1765002700673,"duration":490854}},{"uid":"71ab482ff336b36","reportUrl":"../4232//#testresult/71ab482ff336b36","status":"failed","statusDetails":"AssertionError: Timeout waiting for runner to be ready","time":{"start":1764959049463,"stop":1764959882788,"duration":833325}},{"uid":"9546dc55a0cbc2c6","reportUrl":"../4218//#testresult/9546dc55a0cbc2c6","status":"passed","time":{"start":1764915973741,"stop":1764916468722,"duration":494981}},{"uid":"1d6b5bc717f611e7","reportUrl":"../4217//#testresult/1d6b5bc717f611e7","status":"passed","time":{"start":1764872827604,"stop":1764873325697,"duration":498093}},{"uid":"5446bbc0a30ff83d","reportUrl":"../4204//#testresult/5446bbc0a30ff83d","status":"failed","statusDetails":"AssertionError: Please specify the --openstack-network-name command line option\nassert ''","time":{"start":1764829193258,"stop":1764829193258,"duration":0}},{"uid":"c6b1c9312579b85f","reportUrl":"../4203//#testresult/c6b1c9312579b85f","status":"failed","statusDetails":"AssertionError: Please specify the --openstack-network-name command line option\nassert ''","time":{"start":1764785946264,"stop":1764785946264,"duration":0}},{"uid":"99aae781a96a7014","reportUrl":"../4184//#testresult/99aae781a96a7014","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: test-a1movtgb/0","time":{"start":1764743816198,"stop":1764743816198,"duration":0}},{"uid":"e54d9ea2a043d487","reportUrl":"../4171//#testresult/e54d9ea2a043d487","status":"passed","time":{"start":1764699931243,"stop":1764700423492,"duration":492249}},{"uid":"ae6441f991ebb5a3","reportUrl":"../4164//#testresult/ae6441f991ebb5a3","status":"passed","time":{"start":1764657581442,"stop":1764658074604,"duration":493162}},{"uid":"1a1f11ba78a590ac","reportUrl":"../4157//#testresult/1a1f11ba78a590ac","status":"passed","time":{"start":1764613824163,"stop":1764614377910,"duration":553747}},{"uid":"728aa129f7e464d","reportUrl":"../4138//#testresult/728aa129f7e464d","status":"failed","statusDetails":"AssertionError: Tmate ssh server IP not found in action logs.\nassert '10.87.167.243' in \"\\ufeff2025-11-30T18:50:18.9011268Z Current runner version: '2.328.0'\\n2025-11-30T18:50:18.9016684Z Runner name: 'test-c6wyrpxe-0-n-85e430bdc6bd'\\n2025-11-30T18:50:18.9017347Z Runner group name: 'Default'\\n2025-11-30T18:50:18.9018115Z Machine name: 'github-runner'\\n2025-11-30T18:50:18.9021354Z ##[group]GITHUB_TOKEN Permissions\\n2025-11-30T18:50:18.9023556Z Actions: write\\n2025-11-30T18:50:18.9023975Z ArtifactMetadata: write\\n2025-11-30T18:50:18.9024537Z Attestations: write\\n2025-11-30T18:50:18.9024945Z Checks: write\\n2025-11-30T18:50:18.9025345Z Contents: write\\n2025-11-30T18:50:18.9025776Z Deployments: write\\n2025-11-30T18:50:18.9026234Z Discussions: write\\n2025-11-30T18:50:18.9026629Z Issues: write\\n2025-11-30T18:50:18.9027056Z Metadata: read\\n2025-11-30T18:50:18.9027467Z Models: read\\n2025-11-30T18:50:18.9027829Z Packages: write\\n2025-11-30T18:50:18.9028463Z Pages: write\\n2025-11-30T18:50:18.9028832Z PullRequests: write\\n2025-11-30T18:50:18.9029300Z RepositoryProjects: write\\n2025-11-30T18:50:18.9029749Z SecurityEvents: write\\n2025-11-30T18:50:18.9030356Z Statuses: write\\n2025-11-30T18:50:18.9030849Z ##[endgroup]\\n2025-11-30T18:50:18.9032897Z Secret source: Actions\\n2025-11-30... dependency tree...\\n2025-11-30T18:50:27.5704569Z Reading state information...\\n2025-11-30T18:50:27.7307242Z openssh-client is already the newest version (1:9.6p1-3ubuntu13.14).\\n2025-11-30T18:50:27.7307620Z xz-utils is already the newest version (5.6.1+really5.4.5-1ubuntu0.2).\\n2025-11-30T18:50:27.7308264Z 0 upgraded, 0 newly installed, 0 to remove and 2 not upgraded.\\n2025-11-30T18:50:27.7567208Z Reading package lists...\\n2025-11-30T18:50:27.9104960Z Building dependency tree...\\n2025-11-30T18:50:27.9105295Z Reading state information...\\n2025-11-30T18:50:28.0647745Z tmate is already the newest version (2.4.0-2build3).\\n2025-11-30T18:50:28.0648064Z 0 upgraded, 0 newly installed, 0 to remove and 2 not upgraded.\\n2025-11-30T18:50:28.0800990Z Failed to enable unit: Unit file tmate-proxy.service does not exist.\\n2025-11-30T18:50:28.0812569Z tmate-proxy not enabled\\n2025-11-30T18:50:28.4837050Z /home/ubuntu/.ssh/id_rsa already exists.\\n2025-11-30T18:50:28.4850899Z Overwrite (y/n)? ::debug::Generated SSH-Key successfully\\n2025-11-30T18:50:28.8019121Z ##[error]Error: Invalid value for 'tmate-server-host(TMATE_SERVER_HOST)': ''\\n2025-11-30T18:50:28.8657334Z Cleaning up orphan processes\\n\"","time":{"start":1764528439336,"stop":1764528687399,"duration":248063}},{"uid":"6363b5e8fe2a4f6e","reportUrl":"../4127//#testresult/6363b5e8fe2a4f6e","status":"passed","time":{"start":1764484210059,"stop":1764484702887,"duration":492828}},{"uid":"b5f9149e4dd60cc1","reportUrl":"../4126//#testresult/b5f9149e4dd60cc1","status":"passed","time":{"start":1764441031135,"stop":1764441521669,"duration":490534}},{"uid":"e9baaea6c3fb35de","reportUrl":"../4125//#testresult/e9baaea6c3fb35de","status":"passed","time":{"start":1764421281854,"stop":1764421777960,"duration":496106}},{"uid":"249adeec782e081f","reportUrl":"../4099//#testresult/249adeec782e081f","status":"passed","time":{"start":1764268256580,"stop":1764268751436,"duration":494856}}]},"tags":["asyncio","openstack"]},"source":"45e38602566194bb.json","parameterValues":[]}