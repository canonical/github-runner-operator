INFO     pytest_operator.plugin:plugin.py:745 Adding model github-pr-5ef04-lxd:test-charm-upgrade-6k4p on cloud localhost
WARNING  juju.client.connection:connection.py:893 unexpected facade AgentLifeFlag received from the controller
WARNING  juju.client.connection:connection.py:909 unknown common facade version for AgentLifeFlag,
versions known to client : [2, 3]
versions known to controller : [1]
WARNING  juju.client.connection:connection.py:893 unexpected facade SecretsDrain received from the controller
INFO     juju.model:model.py:1988 Deploying local:jammy/github-runner-0
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4 (not enough units yet - 0/1)
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [allocating] waiting: waiting for machine
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [allocating] waiting: waiting for machine
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [allocating] waiting: waiting for machine
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [allocating] waiting: waiting for machine
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [allocating] waiting: waiting for machine
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [allocating] waiting: agent initialising
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Installing packages
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Installing packages
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Building runner image
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Building runner image
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Building runner image
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Building runner image
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Building runner image
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Building runner image
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Building runner image
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Building runner image
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Building runner image
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] active: 
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] active: 
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [rebooting] active: 
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [rebooting] active: 
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [rebooting] active: 
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] active: 
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] active: 
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] maintenance: Reconciling runners
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [idle] active: 
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [idle] active: 
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [executing] active: 
INFO     juju.model:model.py:2641 Waiting for model:
  test-q5ik6yy4/0 [idle] active:
INFO     pytest_operator.plugin:plugin.py:929 Model status:

Model                    Controller           Cloud/Region         Version  SLA          Timestamp
test-charm-upgrade-6k4p  github-pr-5ef04-lxd  localhost/localhost  3.1.10   unsupported  10:26:28Z

App            Version  Status  Scale  Charm          Channel  Rev  Exposed  Message
test-q5ik6yy4           active      1  github-runner             1  no       

Unit              Workload  Agent  Machine  Public address  Ports  Message
test-q5ik6yy4/0*  active    idle   0        10.86.252.167          

Machine  State    Address        Inst id        Base          AZ  Message
0        started  10.86.252.167  juju-8d8206-0  ubuntu@22.04      Running

INFO     pytest_operator.plugin:plugin.py:935 Juju error logs:

machine-0: 09:59:12 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 09:59:12 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 09:59:12 ERROR juju.worker.dependency "broker-tracker" manifold worker returned unexpected error: no container types determined
unit-test-q5ik6yy4-0: 09:59:12 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-test-q5ik6yy4-0: 09:59:21 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 09:59:22 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 10:04:50 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
machine-0: 10:06:04 ERROR juju.worker.deployer fatal error "test-q5ik6yy4/0": machine needs to reboot
unit-test-q5ik6yy4-0: 10:07:44 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 10:07:45 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 10:08:11 ERROR unit.test-q5ik6yy4/0.juju-log Command /usr/bin/systemctl is-active repo-policy-compliance failed with code 3: b''
unit-test-q5ik6yy4-0: 10:08:11 ERROR unit.test-q5ik6yy4/0.juju-log Found inactive repo-policy-compliance service.
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-test-q5ik6yy4-0/charm/src/utilities.py", line 55, in execute_command
    result.check_returncode()
  File "/usr/lib/python3.10/subprocess.py", line 457, in check_returncode
    raise CalledProcessError(self.returncode, self.args, self.stdout,
subprocess.CalledProcessError: Command '['/usr/bin/systemctl', 'is-active', 'repo-policy-compliance']' returned non-zero exit status 3.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-test-q5ik6yy4-0/charm/./src/charm.py", line 391, in _ensure_service_health
    execute_command(["/usr/bin/systemctl", "is-active", "repo-policy-compliance"])
  File "/var/lib/juju/agents/unit-test-q5ik6yy4-0/charm/src/utilities.py", line 64, in execute_command
    raise SubprocessError(cmd, err.returncode, err.stdout, err.stderr) from err
errors.SubprocessError: [/usr/bin/systemctl is-active repo-policy-compliance] failed with return code 3: b''
unit-test-q5ik6yy4-0: 10:12:21 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 10:12:32 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 10:16:52 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 10:16:55 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 10:18:08 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 10:25:14 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 10:25:25 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 10:25:28 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled
unit-test-q5ik6yy4-0: 10:26:25 CRITICAL unit.test-q5ik6yy4/0.juju-log test mode is enabled

INFO     pytest_operator.plugin:plugin.py:1017 Forgetting model main...