{"uid":"9dd55707a1565921","name":"test_prometheus_metrics","fullName":"tests.integration.test_prometheus_metrics#test_prometheus_metrics","historyId":"8ad402f8a81c79aa3fa21a6fb8e0f79a","time":{"start":1766730330252,"stop":1766730807611,"duration":477359},"description":"\n    arrange: given a prometheus charm application.\n    act: when GitHub runner is integrated.\n    assert: the datasource is registered and basic metrics are available.\n    ","descriptionHtml":"<pre><code>arrange: given a prometheus charm application.\nact: when GitHub runner is integrated.\nassert: the datasource is registered and basic metrics are available.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1766729960395,"stop":1766729960395,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1766729960395,"stop":1766729960395,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1766729960395,"stop":1766729960395,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"k8s_juju","time":{"start":1766729960395,"stop":1766729960599,"duration":204},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"prometheus_app","time":{"start":1766729960600,"stop":1766729988491,"duration":27891},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"grafana_app","time":{"start":1766729988491,"stop":1766730067284,"duration":78793},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"traefik_ingress","time":{"start":1766730067284,"stop":1766730069115,"duration":1831},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1766730069115,"stop":1766730069731,"duration":616},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"proxy_config","time":{"start":1766730069731,"stop":1766730069731,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1766730069731,"stop":1766730069738,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1766730069738,"stop":1766730069759,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"random_app_name_suffix","time":{"start":1766730069759,"stop":1766730069759,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1766730069759,"stop":1766730069759,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"existing_app_suffix","time":{"start":1766730069759,"stop":1766730069759,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_name","time":{"start":1766730069759,"stop":1766730069759,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_config","time":{"start":1766730069760,"stop":1766730069760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder_app_name","time":{"start":1766730069760,"stop":1766730069760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection","time":{"start":1766730069760,"stop":1766730069778,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_config","time":{"start":1766730069760,"stop":1766730069760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_config","time":{"start":1766730069760,"stop":1766730069760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder","time":{"start":1766730069779,"stop":1766730072387,"duration":2608},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner","time":{"start":1766730072387,"stop":1766730275224,"duration":202837},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dockerhub_mirror","time":{"start":1766730072387,"stop":1766730072387,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_app_cos_agent","time":{"start":1766730275224,"stop":1766730325654,"duration":50430},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"grafana_password","time":{"start":1766730325654,"stop":1766730327331,"duration":1677},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_client","time":{"start":1766730327331,"stop":1766730327608,"duration":277},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_repository","time":{"start":1766730327608,"stop":1766730328125,"duration":517},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch","time":{"start":1766730328125,"stop":1766730330250,"duration":2125},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1766730330250,"stop":1766730330251,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"instance_helper","time":{"start":1766730330251,"stop":1766730330251,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: given a prometheus charm application.\n    act: when GitHub runner is integrated.\n    assert: the datasource is registered and basic metrics are available.\n    ","status":"passed","steps":[],"attachments":[{"uid":"1cecb0d184c1092c","name":"log","source":"1cecb0d184c1092c.txt","type":"text/plain","size":179798}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1766730807612,"stop":1766730807612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_github_branch::finalizer","time":{"start":1766730807612,"stop":1766730807990,"duration":378},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"app_openstack_runner::finalizer","time":{"start":1766730807990,"stop":1766730807991,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"image_builder::finalizer","time":{"start":1766730807991,"stop":1766730807991,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"openstack_connection::0","time":{"start":1766730807991,"stop":1766730808373,"duration":382},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1766730808375,"stop":1766730808683,"duration":308},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::finalizer","time":{"start":1766730808375,"stop":1766730808375,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1766730808684,"stop":1766730808684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1766730808684,"stop":1766730808684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1766730808684,"stop":1766730808684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"k8s_juju::0","time":{"start":1766730808684,"stop":1766730808684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"openstack"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_prometheus_metrics"},{"name":"host","value":"github-runner"},{"name":"thread","value":"23330-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_prometheus_metrics"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"5f385548539a3b80","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":8,"broken":110,"skipped":0,"passed":122,"unknown":11,"total":251},"items":[{"uid":"af6f098ae15df54b","reportUrl":"../4594//#testresult/af6f098ae15df54b","status":"passed","time":{"start":1766687240671,"stop":1766687689119,"duration":448448}},{"uid":"354ead61b2a7d038","reportUrl":"../4592//#testresult/354ead61b2a7d038","status":"passed","time":{"start":1766643972167,"stop":1766644680831,"duration":708664}},{"uid":"a1867c1bba33e8e0","reportUrl":"../4591//#testresult/a1867c1bba33e8e0","status":"passed","time":{"start":1766600703030,"stop":1766601179355,"duration":476325}},{"uid":"50341e8a63db5e38","reportUrl":"../4585//#testresult/50341e8a63db5e38","status":"passed","time":{"start":1766557560488,"stop":1766558036783,"duration":476295}},{"uid":"95204f818aaae24c","reportUrl":"../4581//#testresult/95204f818aaae24c","status":"passed","time":{"start":1766514327984,"stop":1766514804337,"duration":476353}},{"uid":"43f1d1316bbf83d6","reportUrl":"../4500//#testresult/43f1d1316bbf83d6","status":"passed","time":{"start":1766471171038,"stop":1766471649019,"duration":477981}},{"uid":"7904105a5f43612e","reportUrl":"../4484//#testresult/7904105a5f43612e","status":"passed","time":{"start":1766428316697,"stop":1766428792711,"duration":476014}},{"uid":"932b18abcce7069c","reportUrl":"../4475//#testresult/932b18abcce7069c","status":"passed","time":{"start":1766384816475,"stop":1766385292824,"duration":476349}},{"uid":"15591610a51171a","reportUrl":"../4474//#testresult/15591610a51171a","status":"passed","time":{"start":1766341542235,"stop":1766342020052,"duration":477817}},{"uid":"7c5abdcfe786aa16","reportUrl":"../4472//#testresult/7c5abdcfe786aa16","status":"passed","time":{"start":1766298322745,"stop":1766298798914,"duration":476169}},{"uid":"14575f6475204f57","reportUrl":"../4471//#testresult/14575f6475204f57","status":"passed","time":{"start":1766255156731,"stop":1766255735687,"duration":578956}},{"uid":"badf9bd329d8dc91","reportUrl":"../4463//#testresult/badf9bd329d8dc91","status":"passed","time":{"start":1766211908500,"stop":1766212386396,"duration":477896}},{"uid":"73952d8eaa86bc89","reportUrl":"../4462//#testresult/73952d8eaa86bc89","status":"passed","time":{"start":1766168671020,"stop":1766169150373,"duration":479353}},{"uid":"82e044cbbe351bfd","reportUrl":"../4458//#testresult/82e044cbbe351bfd","status":"failed","statusDetails":"AssertionError: Timeout waiting for runner to be ready","time":{"start":1766126851068,"stop":1766127710833,"duration":859765}},{"uid":"b6bf4a42ece1513","reportUrl":"../4445//#testresult/b6bf4a42ece1513","status":"passed","time":{"start":1766082548955,"stop":1766083026260,"duration":477305}},{"uid":"23ab26c9e8606828","reportUrl":"../4435//#testresult/23ab26c9e8606828","status":"passed","time":{"start":1766039236246,"stop":1766039950972,"duration":714726}},{"uid":"613c335d4c9a1b5b","reportUrl":"../4408//#testresult/613c335d4c9a1b5b","status":"passed","time":{"start":1765995985124,"stop":1765996461705,"duration":476581}},{"uid":"68e541a42379182e","reportUrl":"../4370//#testresult/68e541a42379182e","status":"passed","time":{"start":1765937938619,"stop":1765938414931,"duration":476312}},{"uid":"3794051c75a414cd","reportUrl":"../4344//#testresult/3794051c75a414cd","status":"broken","statusDetails":"requests.exceptions.ConnectionError: HTTPConnectionPool(host='10.1.53.13', port=3000): Max retries exceeded with url: /api/datasources (Caused by NewConnectionError(\"HTTPConnection(host='10.1.53.13', port=3000): Failed to establish a new connection: [Errno 22] Invalid argument\"))","time":{"start":1765852957693,"stop":1765852998356,"duration":40663}},{"uid":"ecfdeda385111b9b","reportUrl":"../4332//#testresult/ecfdeda385111b9b","status":"passed","time":{"start":1765607107130,"stop":1765607582446,"duration":475316}}]},"tags":["asyncio","openstack"]},"source":"9dd55707a1565921.json","parameterValues":[]}